// Spicr v1.0.3 | thednp Â© 2020 | MIT-License
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Spicr=e()}(this,(function(){"use strict";var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,a="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],n={};function r(t,e,a){var n=e.trim().split(/[,|;]/),r={};return n.map((function(e){var n=e.split(/[:|=]/),s=n[0],i=n[1],o=/y/i.test(s)||/v/i.test(i)?"offsetHeight":"offsetWidth";r[s]=a&&/%/.test(i)&&!/z/i.test(s)?i:/%/.test(i)?parseFloat(i)*t[o]/100:parseFloat(i)})),r}function s(t){var e=t.getAttribute("data-translate"),a=t.getAttribute("data-rotate"),n=t.getAttribute("data-scale"),s=t.getAttribute("data-transform-origin"),i=t.getAttribute("data-opacity"),o=t.getAttribute("data-duration"),l=t.getAttribute("data-delay"),c=t.getAttribute("data-easing");return{translate:e?r(t,e):"",rotate:a?r(t,a):"",origin:s?r(t,s,1):"",scale:n?parseFloat(n):"",opacity:"false"!==i?1:0,duration:isNaN(o)?500:parseInt(o),delay:isNaN(l)?0:parseInt(l),easing:c||"easingCubicOut"}}function i(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function o(t,e,a){var r=t[e]||t[0],o=i(r),l=r.classList.contains("active"),c=t[a],u=c&&c.getElementsByClassName("item-bg")[0],f=u?s(u):0;for(var d in f)if(/translate|rotate/.test(d))for(var m in f[d])f[d][m]=-f[d][m];return f?o.map((function(t){return n.layer(t,0,f)})):o.map((function(t){return n.layer(t,l?0:1)}))}function l(r,s){var i,l,c;i=r,c=l&&l instanceof Element?l:document,r=i instanceof Element?i:c.querySelector(i),s=s||{};var u=this,f=u.tweens=[],d=e&&t?["touchstart","touchend"]:a,m=r.getAttribute("data-interval"),y=r.getAttribute("data-pause"),p=!1!==s.pause&&"false"!==y&&"hover",g=!1===s.interval||0===parseInt(m)||"false"===m?0:"number"==typeof s.interval?s.interval:isNaN(m)?5e3:parseInt(m),v=r.getElementsByClassName("item"),h=r.querySelectorAll("[data-slide]"),x=h.length&&h[0],z=h.length&&h[1],A=r.getElementsByClassName("spicr-pages")[0],L=A&&A.querySelectorAll("[data-slide-to]"),b=null,T=null,C=0,E=0,I=r.classList.contains("spicr-slider"),N=r.classList.contains("spicr-carousel");function S(){r.classList.contains("paused")||(r.classList.add("paused"),!E&&(clearInterval(b),b=null))}function O(){r.classList.contains("paused")&&(r.classList.remove("paused"),!E&&(clearInterval(b),b=null),!E&&u.cycle())}function B(t){if(t.preventDefault(),!E){var e=t.target,a=e&&e.getAttribute("data-slide-to");return e&&!e.classList.contains("active")&&a&&(C=parseInt(a),u.slideTo(C)),!1}}function _(t){if(t.preventDefault(),!E){this===z||z.contains(this)?C++:(this===x||x.contains(this))&&C--,u.slideTo(C)}}function q(t){t=t?"addEventListener":"removeEventListener","hover"===p&&g&&(r[t](d[0],S),r[t](d[1],O)),z&&z[t]("click",_),x&&x[t]("click",_),A&&A[t]("click",B)}function w(t){Array.from(L).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function F(t,e){C=e,v[e].classList.add("next"),E=!0,N&&t>-1&&v[t].offsetHeight!==v[e].offsetHeight&&(r.style.height=getComputedStyle(v[t]).height)}function H(t,e){v[e].classList.add("active"),v[e].classList.remove("next"),v[t]&&v[t].classList.remove("active"),setTimeout((function(){N&&(r.style.height=""),n.reset(r),E=!1,f=[],g&&!r.classList.contains("paused")&&u.cycle()}),0)}this.getActiveIndex=function(){var t=r.getElementsByClassName("item active")[0];return Array.from(v).indexOf(t)},this.cycle=function(){clearInterval(b),b=setTimeout((function(){C++,u.slideTo(C)}),g)},this.slideTo=function(t){var e=this.getActiveIndex();e===t||E||(clearInterval(b),b=setTimeout((function(){if(e<t||0===e&&t===v.length-1?T=1:(e>t||e===v.length-1&&0===t)&&(T=0),t<0?t=v.length-1:t>=v.length&&(t=0),I){F(e,t);var a=-1!==e?o(v,e,t):o(v,e),s=-1!==e&&o(v,t);-1===e?a.length&&(f=f.concat(a)):(a.length&&(f=f.concat(a)),s.length&&(f=f.concat(s))),f.length?(f.reduce((function(t,e){return t._duration+t._delay>e._duration+e._delay?t:e}))._onComplete=function(){return H(e,t)},f.map((function(t){return t.start()}))):H(e,t),L&&w(L[t])}else if(N){if(F(e,t),(f=n.carousel(r,v,e,t,T)).length){if(f[f.length-1]._onComplete=function(){return H(e,t)},v[e]&&v[e].offsetHeight!==v[t].offsetHeight){var i=r.getAttribute("data-easing"),l=r.getAttribute("data-duration");f.push(n.fromTo(r,{height:parseFloat(getComputedStyle(v[e]).height)},{height:parseFloat(getComputedStyle(v[t]).height)},{easing:i||"easingCubicOut",duration:isNaN(l)?500:parseInt(l),delay:250}))}f.map((function(t){return t.start()}))}else H(e,t);L&&w(L[t])}}),1))},this.dispose=function(){E&&f.map((function(t){return t.stop()})),n.reset(r),q(),clearInterval(b),delete r.Spicr},r.Spicr&&r.Spicr.dispose(),q(1),r.Spicr=u,r.getElementsByClassName("item active").length?g&&u.cycle():u.slideTo(0)}if("undefined"==typeof KUTE)throw Error("Spicr requires KUTE.js ^2.0.10");function c(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new l(t)}))}return n.fromTo=KUTE.fromTo,n.carousel=function(t,e,a,o,l){var c,u,f=[],d=s(t),m={},y={},p={},g={},v=e[a],h=v&&i(v),x=i(e[o]),z=d.translate,A=d.rotate,L=d.scale,b=t.getAttribute("data-transform-origin"),T=d.opacity,C=d.duration||500,E=d.delay||parseInt(C)/2,I=d.easing;return T&&(m.opacity=1,y.opacity=0,p.opacity=0,g.opacity=1),(L||z||A)&&(m.transform={},y.transform={},p.transform={},g.transform={}),L&&(m.transform.scale=1,y.transform.scale=L,p.transform.scale=L,g.transform.scale=1),z&&(m.transform.translate3d=[0,0,0],y.transform.translate3d=[z.x?l?-z.x:z.x:0,z.y?l?-z.y:z.y:0,z.z?l?-z.z:z.z:0],p.transform.translate3d=[z.x?l?z.x:-z.x:0,z.y?l?z.y:-z.y:0,z.z?l?z.z:-z.z:0],g.transform.translate3d=[0,0,0]),A&&(m.transform.rotate3d=[0,0,0],y.transform.rotate3d=[A.x?l?-A.x:A.x:0,A.y?l?-A.y:A.y:0,A.z?l?-A.z:A.z:0],p.transform.rotate3d=[A.x?l?A.x:-A.x:0,A.y?l?A.y:-A.y:0,A.z?l?A.z:-A.z:0],g.transform.rotate3d=[0,0,0]),T||A||z||L||(C=50,E=0),c=u={easing:I,duration:C},l||(h&&h.reverse(),x.reverse()),h&&h.map((function(t,e){if(c.delay=250*e,f.push(n.fromTo(t,m,y,c)),b){var a=r(t,b),s="x"in a?/%/.test(a.x)?a.x:a.x+"px":"50%",i="y"in a?/%/.test(a.y)?a.y:a.y+"px":"50%",o="z"in a?a.z+"px":"";t.style.transformOrigin=s+" "+i+" "+o}})),x.map((function(t,e){if(u.delay=(E+50)*e,f.push(n.fromTo(t,p,g,u)),b){var a=r(t,b),s="x"in a?/%/.test(a.x)?a.x:a.x+"px":"50%",i="y"in a?/%/.test(a.y)?a.y:a.y+"px":"50%",o="z"in a?a.z+"px":"";t.style.transformOrigin=s+" "+i+" "+o}})),f},n.layer=function(t,e,a){var r,i=a||s(t),o=t.classList.contains("item-bg"),l={},c={},u=i.translate,f=i.rotate,d=i.scale,m=i.opacity,y=i.origin,p=i.duration,g=i.delay||(o?0:250),v=i.easing;if(v=/InOut/.test(v)||a?v:e?v.replace("In","Out"):v.replace("Out","In"),g=e?g:0,p=e||o?p:1.5*p,(m=!e&&o&&a?0:m)&&(l.opacity=e?0:1,c.opacity=e?1:0),(d||u||f)&&(l.transform={},c.transform={},y)){var h="x"in y?/%/.test(y.x)?y.x:y.x+"px":"50%",x="y"in y?/%/.test(y.y)?y.y:y.y+"px":"50%",z="z"in y?y.z+"px":"";t.style.transformOrigin=h+" "+x+" "+z}if(d&&(l.transform.scale=e?d:1,c.transform.scale=e?1:d),u){var A=e&&u.x?u.x:0,L=u.x&&!e?u.x:0,b=e&&u.y?u.y:0,T=u.y&&!e?u.y:0,C=e&&u.z?u.z:0,E=u.z&&!e?u.z:0;l.transform.translate3d=[A,b,C],c.transform.translate3d=[L,T,E]}if(f){var I=e&&f.x?f.x:0,N=!e&&f.x?f.x:0,S=e&&f.y?f.y:0,O=!e&&f.y?f.y:0,B=e&&f.z?f.z:0,_=!e&&f.z?f.z:0;l.transform.rotate3d=[I,S,B],c.transform.rotate3d=[N,O,_]}return m||f||u||d||(p=50,g=0),r={easing:v,duration:p,delay:g},n.fromTo(t,l,c,r)},n.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},l.initComponent=c,document.body?c():document.addEventListener("DOMContentLoaded",(function t(){c(),document.removeEventListener("DOMContentLoaded",t)})),l}));
