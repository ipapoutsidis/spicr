// Spicr Standalone v1.0.1 | thednp Â© 2020 | MIT-License
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Spicr=e()}(this,(function(){"use strict";var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,n="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],r={};function i(t,e){var n=e.trim().split(/[,|;]/),r={};return n.map((function(e){var n=e.split(/[:|=]/),i=n[0],a=n[1],s=/y/i.test(i)||/v/i.test(a)?"offsetHeight":"offsetWidth";r[i]=/%/.test(a)?parseFloat(a)*t[s]/100:parseFloat(a)})),r}function a(t){var e=t.getAttribute("data-translate"),n=t.getAttribute("data-rotate"),r=t.getAttribute("data-scale"),a=t.getAttribute("data-transform-origin"),s=t.getAttribute("data-opacity"),o=t.getAttribute("data-duration"),l=t.getAttribute("data-delay"),c=t.getAttribute("data-easing");return{translate:e?i(t,e):"",rotate:n?i(t,n):"",origin:a?i(t,a):"",scale:r?parseFloat(r):"",opacity:"false"!==s?1:0,duration:isNaN(o)?500:parseInt(o),delay:isNaN(l)?0:parseInt(l),easing:c||"easingCubicOut"}}function s(t,e,n){var i=t[e]||t[0],s=t[n],o=[],l=i.getElementsByClassName("item-bg")[0],c=s&&s.getElementsByClassName("item-bg")[0],u=c&&a(c);for(var f in u)if(/translate|rotate/.test(f))for(var p in u[f])u[f][p]=-u[f][p];else"opacity"===f&&(u[f]=0);return-1===e?l&&o.push(r.layer(l,1)):(l&&o.push(r.layer(l,0,u)),c&&o.push(r.layer(c,1))),o}function o(t){var e=[],n=t.getElementsByClassName("spicr-layer"),r=t.getElementsByClassName("item-bg")[0];return Array.from(n).map((function(t){return t!==r&&e.push(t)})),e}function l(t){var e=o(t),n=[],i=!t.classList.contains("active");return e.map((function(t){n.push(r.layer(t,i))})),n}function c(i,a){i=function(t,e){var n=e&&e instanceof Element?e:document;return t instanceof Element?t:n.querySelector(t)}(i),a=a||{};var o=this,c=o.tweens=[],u=e&&t?["touchstart","touchend"]:n,f=i.getAttribute("data-interval"),p=i.getAttribute("data-pause"),d=!1!==a.pause&&"false"!==p&&"hover",h=!1===a.interval||0===parseInt(f)||"false"===f?0:"number"==typeof a.interval?a.interval:isNaN(f)?5e3:parseInt(f),m=i.getElementsByClassName("item"),y=i.querySelectorAll("[data-slide]"),v=y.length&&y[0],g=y.length&&y[1],x=i.getElementsByClassName("spicr-pages")[0],S=x&&x.querySelectorAll("[data-slide-to]"),_=null,C=null,b=null,I=0,T=i.classList.contains("spicr-slider"),E=i.classList.contains("spicr-carousel");function A(){i.classList.contains("paused")||(i.classList.add("paused"),!I&&(clearInterval(_),_=null))}function w(){i.classList.contains("paused")&&(i.classList.remove("paused"),!I&&(clearInterval(_),_=null),!I&&o.cycle())}function O(t){if(t.preventDefault(),!I){var e=t.target,n=e&&e.getAttribute("data-slide-to");return e&&!e.classList.contains("active")&&n&&(b=parseInt(n),o.slideTo(b)),!1}}function z(t){if(t.preventDefault(),!I){this===g||g.contains(this)?b++:(this===v||v.contains(this))&&b--,o.slideTo(b)}}function M(t){t=t?"addEventListener":"removeEventListener","hover"===d&&h&&(i[t](u[0],A),i[t](u[1],w)),g&&g[t]("click",z),v&&v[t]("click",z),x&&x[t]("click",O)}function L(t){Array.from(S).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function k(t){b=t,m[t].classList.add("next"),I=!0}function N(t,e){m[e].classList.add("active"),m[e].classList.remove("next"),m[t]&&m[t].classList.remove("active"),setTimeout((function(){E&&(i.style.height=""),r.reset(i),I=!1,c=[],h&&!i.classList.contains("paused")&&o.cycle()}),0)}this.getActiveIndex=function(){var t=i.getElementsByClassName("item active")[0];return Array.from(m).indexOf(t)},this.cycle=function(){clearInterval(_),_=setTimeout((function(){b++,o.slideTo(b)}),h)},this.slideTo=function(t){var e=this.getActiveIndex();e===t||I||(clearInterval(_),_=setTimeout((function(){if(e<t||0===e&&t===m.length-1?C=1:(e>t||e===m.length-1&&0===t)&&(C=0),t<0?t=m.length-1:t>=m.length&&(t=0),T){k(t);var n=-1!==e?s(m,e,t):s(m,e),a=l(-1!==e?m[e]:m[0]),o=-1!==e&&l(m[t]),u=[];-1===e?(n.length&&(u=n,c=c.concat(n),a.length&&(u=a,n[n.length-1].chain(a))),u.length&&(u[u.length-1]._onComplete=function(){return N(e,t)}),c.length&&c[0].start()):(a.length&&(c=c.concat(a),u=a),n.length&&(c=c.concat(n),u.length&&u[u.length-1].chain(n),u=n),o.length&&(c=c.concat(o),u.length&&u[u.length-1].chain(o),u=o),u.length&&(u[u.length-1]._onComplete=function(){return N(e,t)}),a.length?a.map((function(t){return t.start()})):n.length?animatetBg.map((function(t){return t.start()})):o.length&&o.map((function(t){return t.start()}))),S&&L(S[t]),u.length||N(e,t)}else if(E){if(k(t),(c=r.carousel(i,m,e,t,C)).length){if(c[c.length-1]._onComplete=function(){return N(e,t)},m[e]&&m[e].offsetHeight!==m[t].offsetHeight){var f=i.getAttribute("data-easing"),p=i.getAttribute("data-duration");c.push(r.fromTo(i,{height:parseFloat(getComputedStyle(m[e]).height)},{height:parseFloat(getComputedStyle(m[t]).height)},{easing:f||"easingCubicOut",duration:isNaN(p)?500:parseInt(p)}))}c.map((function(t){return t.start()}))}else N(e,t);S&&L(S[t])}}),1))},this.dispose=function(){I&&c.map((function(t){return t.stop()})),r.reset(i),M(),clearInterval(_),delete i.Spicr},i.Spicr&&i.Spicr.dispose(),M(1),i.Spicr=o,i.getElementsByClassName("item active").length?h&&o.cycle():o.slideTo(0)}var u={},f=[],p="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},d={},h={},m={};m.now=self.performance.now.bind(self.performance);var y=0,v=function(t){for(var e=0;e<f.length;)f[e].update(t)?e++:f.splice(e,1);y=requestAnimationFrame(v)};function g(){setTimeout((function(){if(!f.length&&y){for(var t in cancelAnimationFrame(y),y=null,h)if("function"==typeof h[t])u[t]&&delete u[t];else for(var e in h[t])u[e]&&delete u[e];for(var n in d)u[n]&&delete u[n]}}),64)}var x={Tick:y,Ticker:v,Tweens:f,Time:m};for(var S in x)u[S]||(u[S]="Time"===S?m.now:x[S]);p._KUTE=u;var _={duration:700,delay:0,easing:"linear"},C={},b={},I={defaultOptions:_,linkProperty:C,onStart:h,onComplete:b},T={},E={},A={linear:function(t){return t},easingQuadraticIn:function(t){return t*t},easingQuadraticOut:function(t){return t*(2-t)},easingQuadraticInOut:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easingCubicIn:function(t){return t*t*t},easingCubicOut:function(t){return--t*t*t+1},easingCubicInOut:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easingCircularIn:function(t){return-(Math.sqrt(1-t*t)-1)},easingCircularOut:function(t){return Math.sqrt(1-(t-=1)*t)},easingCircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easingBackIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easingBackOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},easingBackInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}};function w(t){return f.push(t)}function O(t){var e=f.indexOf(t);-1!==e&&f.splice(e,1)}E.processEasing=function(t){return"function"==typeof t?t:"function"==typeof A[t]?A[t]:A.linear};var z={};function M(){var t=this,e=function(e){var n=C[e],r=z[e];for(var i in n)if("function"==typeof n[i]&&Object.keys(t.valuesEnd).some((function(e){return r&&r.includes(e)||"attr"===e&&Object.keys(t.valuesEnd[e]).some((function(t){return r&&r.includes(t)}))})))!u[i]&&(u[i]=n[i]);else for(var a in t.valuesEnd)for(var s in t.valuesEnd[a])if("function"==typeof n[s])!u[s]&&(u[s]=n[s]);else for(var o in n[i])n[s]&&"function"==typeof n[s][o]&&!u[o]&&(u[o]=n[s][o])};for(var n in C)e(n)}var L={add:w,remove:O,getAll:function(){return f},removeAll:function(){f.length=0},stop:g,linkInterpolation:M};function k(t,e){try{return e?t instanceof HTMLCollection||t instanceof NodeList||t instanceof Array&&t.every((function(t){return t instanceof Element}))?t:document.querySelectorAll(t):t instanceof Element||t===window?t:document.querySelector(t)}catch(e){console.error("KUTE.js - Element(s) not found: "+t+".")}}var N=function(t){return this.setComponent(t)};N.prototype.setComponent=function(t){var e=t.component,n={onStart:h,onComplete:b},r=t.category,i=t.property;if(z[e]=t.properties||t.subProperties||t.property,t.defaultOptions)for(var a in t.defaultOptions)_[a]=t.defaultOptions[a];if(t.functions)for(var s in n)if(s in t.functions)if("function"==typeof t.functions[s])!n[s][e]&&(n[s][e]={}),!n[s][e][r||i]&&(n[s][e][r||i]=t.functions[s]);else for(var o in t.functions[s])!n[s][e]&&(n[s][e]={}),!n[s][e][o]&&(n[s][e][o]=t.functions[s][o]);if(t.Interpolate){for(var l in t.Interpolate){var c=t.Interpolate[l];if("function"!=typeof c||d[l])for(var u in c)"function"!=typeof c[u]||d[l]||(d[l]=c[u]);else d[l]=c}C[e]=t.Interpolate}if(t.Util)for(var f in t.Util)!T[f]&&(T[f]=t.Util[f]);return{name:e}};var B=function(t,e,n,r){for(var i in this.element=t,this.playing=!1,this._startTime=null,this._startFired=!1,this.valuesEnd=n,this.valuesStart=e,r=r||{},this._resetStart=r.resetStart||0,this._easing="function"==typeof r.easing?r.easing:E.processEasing(r.easing),this._duration=r.duration||_.duration,this._delay=r.delay||_.delay,r){var a="_"+i;a in this||(this[a]=r[i])}var s=this._easing.name;return h[s]||(h[s]=function(t){!u[t]&&t===this._easing.name&&(u[t]=this._easing)}),this};function q(t,e,n){return(t=+t)+(e-=t)*n}function F(t,e,n){for(var r=[],i=0,a=e.length;i<a;i++)r[i]=(1e3*(t[i]+(e[i]-t[i])*n)>>0)/1e3;return r}B.prototype.start=function(t){if(w(this),this.playing=!0,this._startTime=void 0!==t?t:u.Time(),this._startTime+=this._delay,!this._startFired){for(var e in this._onStart&&this._onStart.call(this),h)if("function"==typeof h[e])h[e].call(this,e);else for(var n in h[e])h[e][n].call(this,n);M.call(this),this._startFired=!0}return!y&&v(),this},B.prototype.stop=function(){return this.playing&&(O(this),this.playing=!1,this._onStop&&this._onStop.call(this),this.close()),this},B.prototype.close=function(){for(var t in b)for(var e in b[t])b[t][e].call(this,e);this._startFired=!1,g.call(this)},B.prototype.chain=function(t){return this._chain=[],this._chain=t.length?t:this._chain.concat(t),this},B.prototype.stopChainedTweens=function(){this._chain&&this._chain.length&&this._chain.map((function(t){return t.stop()}))},B.prototype.update=function(t){var e,n;if((t=void 0!==t?t:u.Time())<this._startTime&&this.playing)return!0;for(var r in e=(t-this._startTime)/this._duration,e=0===this._duration||e>1?1:e,n=this._easing(e),this.valuesEnd)u[r](this.element,this.valuesStart[r],this.valuesEnd[r],n);return this._onUpdate&&this._onUpdate.call(this),1!==e||(this._onComplete&&this._onComplete.call(this),this.playing=!1,this.close(),void 0!==this._chain&&this._chain.length&&this._chain.map((function(t){return t.start()})),!1)},E.tween=B;var U="undefined"!=typeof DOMMatrix?DOMMatrix:"undefined"!=typeof WebKitCSSMatrix?WebKitCSSMatrix:"undefined"!=typeof CSSMatrix?CSSMatrix:"undefined"!=typeof MSCSSMatrix?MSCSSMatrix:null,D={component:"transformMatrixBase",property:"transform",functions:{onStart:{transform:function(t){this.valuesEnd[t]&&!u[t]&&(u[t]=function(e,n,r,i){var a=new U,s={};for(var o in r)s[o]="perspective"===o?q(n[o],r[o],i):F(n[o],r[o],i);s.perspective&&(a.m34=-1/s.perspective),a=s.translate3d?a.translate(s.translate3d[0],s.translate3d[1],s.translate3d[2]):a,a=s.rotate3d?a.rotate(s.rotate3d[0],s.rotate3d[1],s.rotate3d[2]):a,s.skew&&(a=s.skew[0]?a.skewX(s.skew[0]):a,a=s.skew[1]?a.skewY(s.skew[1]):a),a=s.scale3d?a.scale(s.scale3d[0],s.scale3d[1],s.scale3d[2]):a,e.style[t]=a.toString()})},CSS3Matrix:function(t){this.valuesEnd.transform&&!u[t]&&(u[t]=U)}}},Interpolate:{perspective:q,translate3d:F,rotate3d:F,skew:F,scale3d:F}};function P(t){t in this.valuesEnd&&!u[t]&&(u[t]=function(e,n,r,i){e.style[t]=(i>.99||i<.01?(10*q(n,r,i)>>0)/10:q(n,r,i)>>0)+"px"})}var j=["top","left","width","height"],H={};j.map((function(t){return H[t]=P}));var K={component:"baseBoxModel",category:"boxModel",properties:j,Interpolate:{numbers:q},functions:{onStart:H}};var Q={component:"baseOpacity",property:"opacity",Interpolate:{numbers:q},functions:{onStart:function(t){t in this.valuesEnd&&!u[t]&&(u[t]=function(e,n,r,i){e.style[t]=(1e3*q(n,r,i)>>0)/1e3})}}},W=new N(D),R=new N(K),V=new N(Q),X={Animation:N,Components:{Transform:W,BoxModel:R,Opacity:V},TweenBase:B,fromTo:function(t,e,n,r){return r=r||{},new E.tween(k(t),e,n,r)},Objects:I,Easing:A,Util:T,Render:x,Interpolate:d,Internals:L,Selector:k,Version:"2.0.10"};for(var Y in r.fromTo=X.fromTo,X)c[Y]=X[Y];function G(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new c(t)}))}return r.carousel=function(t,e,n,s,l){var c,u,f=[],p=a(t),d={},h={},m={},y={},v=e[n]&&o(e[n]),g=o(e[s]),x=p.translate,S=p.rotate,_=p.scale,C=t.getAttribute("data-transform-origin"),b=p.opacity,I=p.duration||500,T=p.delay||parseInt(I)/2,E=p.easing;return b&&(d.opacity=1,h.opacity=0,m.opacity=0,y.opacity=1),(_||x||S)&&(d.transform={},h.transform={},m.transform={},y.transform={}),_&&(d.transform.scale3d=[1,1,1],h.transform.scale3d=[_,_,_],m.transform.scale3d=[_,_,_],y.transform.scale3d=[1,1,1]),x&&(d.transform.translate3d=[0,0,0],h.transform.translate3d=[x.x?l?-x.x:x.x:0,x.y?l?-x.y:x.y:0,x.z?l?-x.z:x.z:0],m.transform.translate3d=[x.x?l?x.x:-x.x:0,x.y?l?x.y:-x.y:0,x.z?l?x.z:-x.z:0],y.transform.translate3d=[0,0,0]),S&&(d.transform.rotate3d=[0,0,0],h.transform.rotate3d=[S.x?l?-S.x:S.x:0,S.y?l?-S.y:S.y:0,S.z?l?-S.z:S.z:0],m.transform.rotate3d=[S.x?l?S.x:-S.x:0,S.y?l?S.y:-S.y:0,S.z?l?S.z:-S.z:0],y.transform.rotate3d=[0,0,0]),l||(v&&v.reverse(),g.reverse()),b||S||x||_||(I=50,T=0),c=u={easing:E,duration:I},v&&v.map((function(t,e){if(c.delay=150*e,f.push(r.fromTo(t,d,h,c)),C){var n=C?i(t,C):{};t.style.transformOrigin=("x"in n?n.x+"px":"50%")+" "+("y"in n?n.y+"px":"50%")+" "+("z"in n?n.z+"px":"")}})),g.map((function(t,e){if(u.delay=(T+50)*e,f.push(r.fromTo(t,m,y,u)),C){var n=C?i(t,C):{};t.style.transformOrigin=("x"in n?n.x+"px":"50%")+" "+("y"in n?n.y+"px":"50%")+" "+("z"in n?n.z+"px":"")}})),f},r.layer=function(t,e,n){var i,s=n||a(t),o={},l={},c=s.translate,u=s.rotate,f=s.scale,p=s.opacity,d=s.origin,h=s.duration,m=s.delay,y=s.easing;if(y=/InOut/.test(y)||n?y:e?y.replace("In","Out"):y.replace("Out","In"),m=e?m:0,p&&(o.opacity=e?0:1,l.opacity=e?1:0),(f||c||u)&&(o.transform={},l.transform={},d&&(t.style.transformOrigin=("x"in d?d.x+"px":"50%")+" "+("y"in d?d.y+"px":"50%")+" "+("z"in d?d.z+"px":""))),f&&(o.transform.scale3d=e?[f,f,f]:[1,1,1],l.transform.scale3d=e?[1,1,1]:[f,f,f]),c){var v=e&&c.x?c.x:0,g=c.x&&!e?c.x:0,x=e&&c.y?c.y:0,S=c.y&&!e?c.y:0,_=e&&c.z?c.z:0,C=c.z&&!e?c.z:0;o.transform.translate3d=[v,x,_],l.transform.translate3d=[g,S,C]}if(u){var b=e&&u.x?u.x:0,I=!e&&u.x?u.x:0,T=e&&u.y?u.y:0,E=!e&&u.y?u.y:0,A=e&&u.z?u.z:0,w=!e&&u.z?u.z:0;o.transform.rotate3d=[b,T,A],l.transform.rotate3d=[I,E,w]}return p||u||c||f||(h=50,m=0),i={easing:y,duration:h,delay:m},r.fromTo(t,o,l,i)},r.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},c.initComponent=G,document.body?G():document.addEventListener("DOMContentLoaded",(function t(){G(),document.removeEventListener("DOMContentLoaded",t)})),c}));
