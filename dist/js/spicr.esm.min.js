// Spicr v1.0.4 | thednp Â© 2020 | MIT-License
var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,a="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],n=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t,e)}),e)}catch(t){}return t}()&&{passive:!0},r={};function s(t,e,a){var n=e.trim().split(/[,|;]/),r={};return n.map((function(e){var n=e.split(/[:|=]/),s=n[0],i=n[1],o=/y/i.test(s)||/v/i.test(i)?"offsetHeight":"offsetWidth";r[s]=a&&/%/.test(i)&&!/z/i.test(s)?i:/%/.test(i)?parseFloat(i)*t[o]/100:parseFloat(i)})),r}function i(t){var e=t.getAttribute("data-translate"),a=t.getAttribute("data-rotate"),n=parseFloat(t.getAttribute("data-scale")),r=t.getAttribute("data-transform-origin"),i=t.getAttribute("data-opacity"),o=parseInt(t.getAttribute("data-duration")),c=parseInt(t.getAttribute("data-delay")),u=t.getAttribute("data-easing");return{translate:e?s(t,e):"",rotate:a?s(t,a):"",origin:r?s(t,r,1):"",scale:isNaN(n)?"":n,opacity:"false"!==i?1:0,duration:isNaN(o)?500:o,delay:isNaN(c)?0:c,easing:u||"easingCubicOut"}}function o(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function c(t,e,a){var n=t[e]||t[0],s=o(n),c=n.classList.contains("active"),u=t[a],l=u&&u.getElementsByClassName("item-bg")[0],f=l?i(l):0;for(var d in f)if(/translate|rotate/.test(d))for(var m in f[d])f[d][m]=-f[d][m];return f?s.map((function(t){return r.layer(t,0,f)})):s.map((function(t){return r.layer(t,c?0:1)}))}function u(s,i){var o,u,l;o=s,l=u&&u instanceof Element?u:document,s=o instanceof Element?o:l.querySelector(o),i=i||{};var f=this,d=f.tweens=[],m={},y=e&&t?["touchstart","touchend"]:a,p=s.getAttribute("data-interval"),g=s.getAttribute("data-pause"),h=s.getAttribute("data-touch"),v=!1===i.pause||"false"===g?0:"hover",x=!1===i.touch||"false"===h?0:1,T=!1===i.interval||0===parseInt(p)||"false"===p?0:"number"==typeof i.interval?i.interval:isNaN(p)?5e3:parseInt(p),L=s.getElementsByClassName("item"),z=s.querySelectorAll("[data-slide]"),A=z.length&&z[0],b=z.length&&z[1],E=s.getElementsByClassName("spicr-pages")[0],C=E&&E.querySelectorAll("[data-slide-to]"),I=null,N=null,O=0,X=0,S=s.classList.contains("spicr-slider"),M=s.classList.contains("spicr-carousel");function _(){s.classList.contains("paused")||(s.classList.add("paused"),!X&&(clearInterval(I),I=null))}function B(){s.classList.contains("paused")&&(s.classList.remove("paused"),!X&&(clearInterval(I),I=null),!X&&f.cycle())}function D(t){if(t.preventDefault(),!X){var e=t.target,a=e&&e.getAttribute("data-slide-to");return e&&!e.classList.contains("active")&&a&&(O=parseInt(a),f.slideTo(O)),!1}}function q(t){if(t.preventDefault(),!X){this===b||b.contains(this)?O++:(this===A||A.contains(this))&&O--,f.slideTo(O)}}function w(t){t=t?"addEventListener":"removeEventListener","hover"===v&&T&&(s[t](y[0],_),s[t](y[1],B)),b&&b[t]("click",q),A&&A[t]("click",q),x&&L.length>1&&s[t]("touchstart",F,n),E&&E[t]("click",D)}function F(t){m.isTouch||(m.startX=t.changedTouches[0].pageX,s.contains(t.target)&&(m.isTouch=!0,H(1)))}function H(t){s[t=t?"addEventListener":"removeEventListener"]("touchmove",P,n),s[t]("touchend",k,n)}function P(t){if(m.isTouch)return m.currentX=t.changedTouches[0].pageX,"touchmove"===t.type&&t.changedTouches.length>1?(t.preventDefault(),!1):void 0}function k(t){if(m.isTouch&&!X&&(m.endX=m.currentX||t.changedTouches[0].pageX,m.isTouch)){if((!s.contains(t.target)||!s.contains(t.relatedTarget))&&Math.abs(m.startX-m.endX)<75)return!1;m.currentX<m.startX?O++:m.currentX>m.startX&&O--,m.isTouch=!1,f.slideTo(O),H()}}function K(t){Array.from(C).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function U(t,e){O=e,L[e].classList.add("next"),X=!0,M&&t>-1&&L[t].offsetHeight!==L[e].offsetHeight&&(s.style.height=getComputedStyle(L[t]).height)}function j(t,e){L[e].classList.add("active"),L[e].classList.remove("next"),L[t]&&L[t].classList.remove("active"),setTimeout((function(){M&&(s.style.height=""),r.reset(s),X=!1,d=[],T&&!s.classList.contains("paused")&&f.cycle()}),0)}this.getActiveIndex=function(){var t=s.getElementsByClassName("item active")[0];return Array.from(L).indexOf(t)},this.cycle=function(){clearInterval(I),I=setTimeout((function(){O++,f.slideTo(O)}),T)},this.slideTo=function(t){var e=this.getActiveIndex();e===t||X||(clearInterval(I),I=setTimeout((function(){if(e<t||0===e&&t===L.length-1?N=1:(e>t||e===L.length-1&&0===t)&&(N=0),t<0?t=L.length-1:t>=L.length&&(t=0),S){U(e,t);var a=-1!==e?c(L,e,t):c(L,e),n=-1!==e&&c(L,t);-1===e?a.length&&(d=d.concat(a)):(a.length&&(d=d.concat(a)),n.length&&(d=d.concat(n))),d.length?(d.reduce((function(t,e){return t._duration+t._delay>e._duration+e._delay?t:e}))._onComplete=function(){return j(e,t)},d.map((function(t){return t.start()}))):j(e,t),C&&K(C[t])}else M&&(U(e,t),(d=r.carousel(s,L,e,t,N)).length?(L[e]&&L[e].offsetHeight!==L[t].offsetHeight&&d.push(r.fromTo(s,{height:parseFloat(getComputedStyle(L[e]).height)},{height:parseFloat(getComputedStyle(L[t]).height)},{easing:"easingCubicOut",duration:500,delay:Math.max.apply(Math,d.map((function(t){return t._delay+t._duration})))||250})),d[d.length-1]._onComplete=function(){return j(e,t)},d.map((function(t){return t.start()}))):j(e,t),C&&K(C[t]))}),1))},this.dispose=function(){X&&d.map((function(t){return t.stop()})),r.reset(s),m={},w(),clearInterval(I),delete s.Spicr},s.Spicr&&s.Spicr.dispose(),w(1),s.Spicr=f,s.getElementsByClassName("item active").length?T&&f.cycle():f.slideTo(0)}if("undefined"==typeof KUTE)throw Error("Spicr requires KUTE.js ^2.0.10");function l(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new u(t)}))}r.fromTo=KUTE.fromTo,r.carousel=function(t,e,a,n,c){var u,l,f=[],d=i(t),m={},y={},p={},g={},h=e[a],v=h&&o(h),x=o(e[n]),T=d.translate,L=d.rotate,z=d.scale,A=t.getAttribute("data-transform-origin"),b=d.opacity,E=d.duration||500,C=d.delay||parseInt(E)/2,I=d.easing;return b&&(m.opacity=1,y.opacity=0,p.opacity=0,g.opacity=1),(z||T||L)&&(m.transform={},y.transform={},p.transform={},g.transform={}),z&&(m.transform.scale=1,y.transform.scale=z,p.transform.scale=z,g.transform.scale=1),T&&(m.transform.translate3d=[0,0,0],y.transform.translate3d=[T.x?c?-T.x:T.x:0,T.y?c?-T.y:T.y:0,T.z?c?-T.z:T.z:0],p.transform.translate3d=[T.x?c?T.x:-T.x:0,T.y?c?T.y:-T.y:0,T.z?c?T.z:-T.z:0],g.transform.translate3d=[0,0,0]),L&&(m.transform.rotate3d=[0,0,0],y.transform.rotate3d=[L.x?c?-L.x:L.x:0,L.y?c?-L.y:L.y:0,L.z?c?-L.z:L.z:0],p.transform.rotate3d=[L.x?c?L.x:-L.x:0,L.y?c?L.y:-L.y:0,L.z?c?L.z:-L.z:0],g.transform.rotate3d=[0,0,0]),b||L||T||z||(E=50,C=0),u=l={easing:I,duration:E},c||(v&&v.reverse(),x.reverse()),v&&v.map((function(t,e){if(u.delay=250*e,f.push(r.fromTo(t,m,y,u)),A){var a=s(t,A),n="x"in a?/%/.test(a.x)?a.x:a.x+"px":"50%",i="y"in a?/%/.test(a.y)?a.y:a.y+"px":"50%",o="z"in a?a.z+"px":"";t.style.transformOrigin=n+" "+i+" "+o}})),x.map((function(t,e){if(l.delay=(C+50)*e,f.push(r.fromTo(t,p,g,l)),A){var a=s(t,A),n="x"in a?/%/.test(a.x)?a.x:a.x+"px":"50%",i="y"in a?/%/.test(a.y)?a.y:a.y+"px":"50%",o="z"in a?a.z+"px":"";t.style.transformOrigin=n+" "+i+" "+o}})),f},r.layer=function(t,e,a){var n,s=a||i(t),o=t.classList.contains("item-bg"),c={},u={},l=s.translate,f=s.rotate,d=s.scale,m=s.opacity,y=s.origin,p=s.duration,g=s.delay||(o?0:250),h=s.easing;if(h=/InOut/.test(h)||a?h:e?h.replace("In","Out"):h.replace("Out","In"),g=e?g:0,p=e||o?p:1.5*p,(m=!e&&o&&a?0:m)&&(c.opacity=e?0:1,u.opacity=e?1:0),(d||l||f)&&(c.transform={},u.transform={},y)){var v="x"in y?/%/.test(y.x)?y.x:y.x+"px":"50%",x="y"in y?/%/.test(y.y)?y.y:y.y+"px":"50%",T="z"in y?y.z+"px":"";t.style.transformOrigin=v+" "+x+" "+T}if(d&&(c.transform.scale=e?d:1,u.transform.scale=e?1:d),l){var L=e&&l.x?l.x:0,z=l.x&&!e?l.x:0,A=e&&l.y?l.y:0,b=l.y&&!e?l.y:0,E=e&&l.z?l.z:0,C=l.z&&!e?l.z:0;c.transform.translate3d=[L,A,E],u.transform.translate3d=[z,b,C]}if(f){var I=e&&f.x?f.x:0,N=!e&&f.x?f.x:0,O=e&&f.y?f.y:0,X=!e&&f.y?f.y:0,S=e&&f.z?f.z:0,M=!e&&f.z?f.z:0;c.transform.rotate3d=[I,O,S],u.transform.rotate3d=[N,X,M]}return m||f||l||d||(p=50,g=0),n={easing:h,duration:p,delay:g},r.fromTo(t,c,u,n)},r.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},u.initComponent=l,document.body?l():document.addEventListener("DOMContentLoaded",(function t(){l(),document.removeEventListener("DOMContentLoaded",t)}));export default u;
