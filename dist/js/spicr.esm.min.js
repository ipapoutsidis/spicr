// Spicr v1.0.8 | thednp Â© 2021 | MIT-License
const t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,n="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"];var s=!!(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(t=!0,t)});document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t,e)}),e)}catch(t){throw Error("Passive events are not supported")}return t})()&&{passive:!0};function a(t){return"true"===t||"false"!==t&&(Number.isNaN(+t)?""===t||"null"===t?null:t:+t)}var r={};function o(t,e,n){const s=e.trim().split(/[,|;]/),a={};return s.forEach(e=>{const s=e.split(/[:|=]/),r=s[0],o=s[1],i=/y/i.test(r)||/v/i.test(o)?"offsetHeight":"offsetWidth";n&&/%/.test(o)&&!/z/i.test(r)?a[r]=o:a[r]=/%/.test(o)?parseFloat(o)*t[i]/100:parseFloat(o)}),a}const i={delay:250,duration:500,easing:"easingCubicOut",interval:5e3,touch:!0,pause:"hover"};function c(t){const e=function(t){const e={};return["translate","rotate","scale","transform-origin","opacity","duration","delay","easing"].forEach(n=>{e["transform-origin"===n?"origin":n]=t.getAttribute("data-"+n)}),e}(t),{translate:n,rotate:s,origin:a,opacity:r,easing:c}=e;let{scale:l,duration:u,delay:d}=e;return l=parseFloat(l),u=+u,d=+d,{translate:n?o(t,n):"",rotate:s?o(t,s):"",origin:a?o(t,a,1):"",scale:Number.isNaN(l)?"":l,opacity:"false"!==r?1:0,duration:Number.isNaN(u)?i.duration:u,delay:Number.isNaN(d)?0:d,easing:c||i.easing}}function l(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function u(t,e,n){const s=t[e]||t[0],a=l(s),o=s.classList.contains("active"),i=t[n],u=i&&i.getElementsByClassName("item-bg")[0],d=u?c(u):0;return d?(Object.keys(d).forEach(t=>{/translate|rotate/.test(t)&&d[t]instanceof Object&&Object.keys(d[t]).forEach(e=>{d[t][e]=-d[t][e]})}),a.map(t=>r.layer(t,0,d))):a.map(t=>r.layer(t,o?0:1))}function d(o,c){const l=function(t,e){const n=e&&e instanceof Element?e:document;return t instanceof Element?t:n.querySelector(t)}(o),d=function(t,e,n,s){const r={},o={},i={...t.dataset};return Object.keys(i).forEach(t=>{const e=t.includes(s)?t.replace(s,"").replace(/[A-Z]/,t=>t.toLowerCase()):t;o[e]=a(i[t])}),Object.keys(n).forEach(t=>{n[t]=a(n[t])}),Object.keys(e).forEach(t=>{r[t]=t in n?n[t]:t in o?o[t]:e[t]}),r}(l,i,c||{}),f=this;f.tweens=[];let m=f.tweens,y={},h=n;e&&t&&(h=["touchstart","touchend"]);const g=d.pause,p=d.touch,v=d.interval,x=l.getElementsByClassName("item"),E=l.querySelectorAll("[data-slide]"),T=E.length&&E[0],L=E.length&&E[1],z=l.getElementsByClassName("spicr-pages")[0],b=z&&z.querySelectorAll("[data-slide-to]");let N=null,O=null,C=0,A=0;const X=l.classList.contains("spicr-slider"),w=l.classList.contains("spicr-carousel");function S(){l.classList.contains("paused")||(l.classList.add("paused"),A||(clearInterval(N),N=null))}function $(){l.classList.contains("paused")&&(l.classList.remove("paused"),A||(clearInterval(N),N=null,f.cycle()))}function I(t){if(t.preventDefault(),A)return;const e=t.target,n=e&&e.getAttribute("data-slide-to");e&&!e.classList.contains("active")&&n&&(C=parseInt(n,10),f.slideTo(C))}function j(t){if(t.preventDefault(),A)return;this===L||L.contains(this)?C+=1:(this===T||T.contains(this))&&(C-=1),f.slideTo(C)}function k(t){y.isTouch||(y.startX=t.changedTouches[0].pageX,l.contains(t.target)&&(y.isTouch=!0,D(1)))}function _(t){y.isTouch&&(y.currentX=t.changedTouches[0].pageX,"touchmove"===t.type&&t.changedTouches.length>1&&t.preventDefault())}function B(t){if(y.isTouch&&!A&&(y.endX=y.currentX||t.changedTouches[0].pageX,y.isTouch)){if((!l.contains(t.target)||!l.contains(t.relatedTarget))&&Math.abs(y.startX-y.endX)<75)return;y.currentX<y.startX?C+=1:y.currentX>y.startX&&(C-=1),y.isTouch=!1,f.slideTo(C),D()}}function D(t){const e=t?"addEventListener":"removeEventListener";l[e]("touchmove",_,s),l[e]("touchend",B,s)}function M(t){const e=t?"addEventListener":"removeEventListener";"hover"===g&&v&&(l[e](h[0],S),l[e](h[1],$)),L&&L[e]("click",j),T&&T[e]("click",j),p&&x.length>1&&l[e]("touchstart",k,s),z&&z[e]("click",I)}function P(t){Array.from(b).map(t=>t.classList.remove("active")),t&&t.classList.add("active")}function q(t,e){C=e,x[e].classList.add("next"),A=!0,w&&t>-1&&x[t].offsetHeight!==x[e].offsetHeight&&(l.style.height=getComputedStyle(x[t]).height)}function F(t,e){x[e].classList.add("active"),x[e].classList.remove("next"),x[t]&&x[t].classList.remove("active"),setTimeout(()=>{w&&(l.style.height=""),r.reset(l),A=!1,m=[],v&&!l.classList.contains("paused")&&f.cycle()},0)}this.getActiveIndex=()=>{const t=l.getElementsByClassName("item active")[0];return Array.from(x).indexOf(t)},this.cycle=()=>{clearInterval(N),N=setTimeout(()=>{C+=1,f.slideTo(C)},v)},this.slideTo=t=>{let e=t;const n=this.getActiveIndex();n===e||A||(clearInterval(N),N=setTimeout(()=>{if(n<e||0===n&&e===x.length-1?O=1:(n>e||n===x.length-1&&0===e)&&(O=0),e<0?e=x.length-1:e>=x.length&&(e=0),X){q(n,e);const t=-1!==n?u(x,n,e):u(x,n),s=-1!==n&&u(x,e);-1===n?t.length&&(m=m.concat(t)):(t.length&&(m=m.concat(t)),s.length&&(m=m.concat(s))),m.length?(m.reduce((t,e)=>t._duration+t._delay>e._duration+e._delay?t:e)._onComplete=()=>F(n,e),m.forEach(t=>t.start())):F(n,e),b&&P(b[e])}else if(w){q(n,e);const{delay:t,duration:s,easing:a}=i,o=x[n],c=x[e];m=r.carousel(l,x,n,e,O),m.length?(o&&o.offsetHeight!==c.offsetHeight&&m.push(r.fromTo(l,{height:parseFloat(getComputedStyle(o).height)},{height:parseFloat(getComputedStyle(c).height)},{easing:a,duration:s,delay:Math.max(...m.map(t=>t._delay+t._duration))||t})),m[m.length-1]._onComplete=()=>F(n,e),m.forEach(t=>t.start())):F(n,e),b&&P(b[e])}},1))},this.dispose=()=>{A&&m.forEach(t=>t.stop()),r.reset(l),y={},M(),clearInterval(N),delete l.Spicr},l.Spicr&&l.Spicr.dispose(),M(1),l.Spicr=f,l.getElementsByClassName("item active").length?v&&f.cycle():f.slideTo(0)}if(void 0===window.KUTE)throw Error("Spicr requires KUTE.js ^2.0.10");function f(t){const e=t instanceof Element?t:document;Array.from(e.querySelectorAll('[data-function="spicr"]')).forEach(t=>new d(t))}r.fromTo=window.KUTE.fromTo,r.carousel=function(t,e,n,s,a){const u=[],d=c(t),f={},m={},y={},h={},g=e[n],p=g&&l(g),v=l(e[s]),{translate:x}=d,{rotate:E}=d,{scale:T}=d,L=t.getAttribute("data-transform-origin"),{opacity:z}=d,{easing:b}=d;let N=d.duration||i.duration,O=d.delay||+N/2;if(z&&(f.opacity=1,m.opacity=0,y.opacity=0,h.opacity=1),(T||x||E)&&(f.transform={},m.transform={},y.transform={},h.transform={}),T&&(f.transform.scale=1,m.transform.scale=T,y.transform.scale=T,h.transform.scale=1),x){f.transform.translate3d=[0,0,0];let t=0,e=0,n=0;"x"in x&&(t=a?-x.x:x.x),"y"in x&&(e=a?-x.y:x.y),"Z"in x&&(n=a?-x.z:x.z),m.transform.translate3d=[t,e,n];let s=0,r=0,o=0;"x"in x&&(s=a?x.x:-x.x),"y"in x&&(r=a?x.y:-x.y),"Z"in x&&(o=a?x.z:-x.z),y.transform.translate3d=[s,r,o],h.transform.translate3d=[0,0,0]}if(E){f.transform.rotate3d=[0,0,0];let t=0,e=0,n=0;"x"in E&&(t=a?-E.x:E.x),"y"in E&&(e=a?-E.y:E.y),"Z"in E&&(n=a?-E.z:E.z),m.transform.rotate3d=[t,e,n];let s=0,r=0,o=0;"x"in E&&(s=a?E.x:-E.x),"y"in E&&(r=a?E.y:-E.y),"Z"in E&&(o=a?E.z:-E.z),y.transform.rotate3d=[s,r,o],h.transform.rotate3d=[0,0,0]}a||(p&&p.reverse(),v.reverse()),z||E||x||T||(N=50,O=0);const C={easing:b,duration:N},A=C;return p&&p.forEach((t,e)=>{if(C.delay=i.delay*e,u.push(r.fromTo(t,f,m,C)),L){const e=o(t,L);let n="50%",s="50%";const a="z"in e?` ${e.z}px`:"";"x"in e&&(n=/%/.test(e.x)?e.x:e.x+"px"),"y"in e&&(s=/%/.test(e.y)?e.y:e.y+"px"),t.style.transformOrigin=`${n} ${s}${a}`}}),v.forEach((t,e)=>{if(A.delay=(O+50)*e,u.push(r.fromTo(t,y,h,A)),L){const e=o(t,L);let n="50%",s="50%";const a="z"in e?` ${e.z}px`:"";"x"in e&&(n=/%/.test(e.x)?e.x:e.x+"px"),"y"in e&&(s=/%/.test(e.y)?e.y:e.y+"px"),t.style.transformOrigin=`${n} ${s}${a}`}}),u},r.layer=function(t,e,n){const s=n||c(t),a=t.classList.contains("item-bg"),o={},l={},{translate:u}=s,{rotate:d}=s,{scale:f}=s,{origin:m}=s;let{opacity:y}=s,{duration:h}=s,{easing:g}=s,p=s.delay||(a?0:i.delay);if(/InOut/.test(g)||n||(g=e?g.replace("In","Out"):g.replace("Out","In")),e||(h=a?h:1.5*h),p=e?p:0,y=!e&&a&&n?0:y,y&&(o.opacity=e?0:1,l.opacity=e?1:0),(f||u||d)&&(o.transform={},l.transform={},m)){let e="50%",n="50%";const s="z"in m?` ${m.z}px`:"";"x"in m&&(e=/%/.test(m.x)?m.x:m.x+"px"),"y"in m&&(n=/%/.test(m.y)?m.y:m.y+"px"),t.style.transformOrigin=`${e} ${n}${s}`}if(f&&(o.transform.scale=e?f:1,l.transform.scale=e?1:f),u){const t=e&&u.x?u.x:0,n=u.x&&!e?u.x:0,s=e&&u.y?u.y:0,a=u.y&&!e?u.y:0,r=e&&u.z?u.z:0,i=u.z&&!e?u.z:0;o.transform.translate3d=[t,s,r],l.transform.translate3d=[n,a,i]}if(d){const t=e&&d.x?d.x:0,n=!e&&d.x?d.x:0,s=e&&d.y?d.y:0,a=!e&&d.y?d.y:0,r=e&&d.z?d.z:0,i=!e&&d.z?d.z:0;o.transform.rotate3d=[t,s,r],l.transform.rotate3d=[n,a,i]}return y||d||u||f||(h=50,p=0),r.fromTo(t,o,l,{easing:g,duration:h,delay:p})},r.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).forEach(t=>{t.style.opacity="",t.style.transform="",t.style.transformOrigin=""})},d.initComponent=f,document.body?f():document.addEventListener("DOMContentLoaded",f,{once:!0});export default d;
