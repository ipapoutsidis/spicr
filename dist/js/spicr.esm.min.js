// Spicr v1.0.0 | thednp Â© 2020 | MIT-License
var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,a="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],n={};function r(t,e){var a=e.trim().split(/[,|;]/),n={};return a.map((function(e){var a=e.split(/[:|=]/),r=a[0],s=a[1],i=/y/i.test(r)||/v/i.test(s)?"offsetHeight":"offsetWidth";n[r]=/%/.test(s)?parseFloat(s)*t[i]/100:parseFloat(s)})),n}function s(t){var e=t.getAttribute("data-translate"),a=t.getAttribute("data-rotate"),n=t.getAttribute("data-scale"),s=t.getAttribute("data-transform-origin"),i=t.getAttribute("data-opacity"),o=t.getAttribute("data-duration"),l=t.getAttribute("data-delay"),c=t.getAttribute("data-easing");return{translate:e?r(t,e):"",rotate:a?r(t,a):"",origin:s?r(t,s):"",scale:n?parseFloat(n):"",opacity:"false"!==i?1:0,duration:isNaN(o)?500:parseInt(o),delay:isNaN(l)?0:parseInt(l),easing:c||"easingCubicOut"}}function i(t,e,a){var r=t[e]||t[0],i=t[a],o=[],l=r.getElementsByClassName("item-bg")[0],c=i&&i.getElementsByClassName("item-bg")[0],u=c&&s(c);for(var f in u)if(/translate|rotate/.test(f))for(var m in u[f])u[f][m]=-u[f][m];else"opacity"===f&&(u[f]=0);return-1===e?l&&o.push(n.layer(l,1)):(l&&o.push(n.layer(l,0,u)),c&&o.push(n.layer(c,1))),o}function o(t){var e=[],a=t.getElementsByClassName("spicr-layer"),n=t.getElementsByClassName("item-bg")[0];return Array.from(a).map((function(t){return t!==n&&e.push(t)})),e}function l(t){var e=o(t),a=[],r=!t.classList.contains("active");return e.map((function(t){a.push(n.layer(t,r))})),a}function c(r,s){var o,c,u;o=r,u=c&&c instanceof Element?c:document,r=o instanceof Element?o:u.querySelector(o),s=s||{};var f=this,m=f.tweens=[],d=e&&t?["touchstart","touchend"]:a,p=r.getAttribute("data-interval"),g=r.getAttribute("data-pause"),y=!1!==s.pause&&"false"!==g&&"hover",h=!1===s.interval||0===parseInt(p)||"false"===p?0:"number"==typeof s.interval?s.interval:isNaN(p)?5e3:parseInt(p),v=r.getElementsByClassName("item"),x=r.querySelectorAll("[data-slide]"),z=x.length&&x[0],A=x.length&&x[1],b=r.getElementsByClassName("spicr-pages")[0],L=b&&b.querySelectorAll("[data-slide-to]"),C=null,E=null,T=null,I=0,N=r.classList.contains("spicr-slider"),O=r.classList.contains("spicr-carousel");function S(){r.classList.contains("paused")||(r.classList.add("paused"),!I&&(clearInterval(C),C=null))}function B(){r.classList.contains("paused")&&(r.classList.remove("paused"),!I&&(clearInterval(C),C=null),!I&&f.cycle())}function q(t){if(t.preventDefault(),!I){var e=t.target,a=e&&e.getAttribute("data-slide-to");return e&&!e.classList.contains("active")&&a&&(T=parseInt(a),f.slideTo(T)),!1}}function w(t){if(t.preventDefault(),!I){this===A||A.contains(this)?T++:(this===z||z.contains(this))&&T--,f.slideTo(T)}}function F(t){t=t?"addEventListener":"removeEventListener","hover"===y&&h&&(r[t](d[0],S),r[t](d[1],B)),A&&A[t]("click",w),z&&z[t]("click",w),b&&b[t]("click",q)}function D(t){Array.from(L).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function P(t){T=t,v[t].classList.add("next"),I=!0}function k(t,e){v[e].classList.add("active"),v[e].classList.remove("next"),v[t]&&v[t].classList.remove("active"),setTimeout((function(){O&&(r.style.height=""),n.reset(r),I=!1,m=[],h&&!r.classList.contains("paused")&&f.cycle()}),0)}this.getActiveIndex=function(){var t=r.getElementsByClassName("item active")[0];return Array.from(v).indexOf(t)},this.cycle=function(){clearInterval(C),C=setTimeout((function(){T++,f.slideTo(T)}),h)},this.slideTo=function(t){var e=this.getActiveIndex();e===t||I||(clearInterval(C),C=setTimeout((function(){if(e<t||0===e&&t===v.length-1?E=1:(e>t||e===v.length-1&&0===t)&&(E=0),t<0?t=v.length-1:t>=v.length&&(t=0),N){P(t);var a=-1!==e?i(v,e,t):i(v,e),s=l(-1!==e?v[e]:v[0]),o=-1!==e&&l(v[t]),c=[];-1===e?(a.length&&(c=a,m=m.concat(a),s.length&&(c=s,a[a.length-1].chain(s))),c.length&&(c[c.length-1]._onComplete=function(){return k(e,t)}),m.length&&m[0].start()):(s.length&&(m=m.concat(s),c=s),a.length&&(m=m.concat(a),c.length&&c[c.length-1].chain(a),c=a),o.length&&(m=m.concat(o),c.length&&c[c.length-1].chain(o),c=o),c.length&&(c[c.length-1]._onComplete=function(){return k(e,t)}),s.length?s.map((function(t){return t.start()})):a.length?animatetBg.map((function(t){return t.start()})):o.length&&o.map((function(t){return t.start()}))),L&&D(L[t]),c.length||k(e,t)}else if(O){if(P(t),(m=n.carousel(r,v,e,t,E)).length){if(m[m.length-1]._onComplete=function(){return k(e,t)},v[e]&&v[e].offsetHeight!==v[t].offsetHeight){var u=r.getAttribute("data-easing"),f=r.getAttribute("data-duration");m.push(n.fromTo(r,{height:parseFloat(getComputedStyle(v[e]).height)},{height:parseFloat(getComputedStyle(v[t]).height)},{easing:u||"easingCubicOut",duration:isNaN(f)?500:parseInt(f)}))}m.map((function(t){return t.start()}))}else k(e,t);L&&D(L[t])}}),1))},this.dispose=function(){I&&m.map((function(t){return t.stop()})),n.reset(r),F(),clearInterval(C),delete r.Spicr},r.Spicr&&r.Spicr.dispose(),F(1),r.Spicr=f,r.getElementsByClassName("item active").length?h&&f.cycle():f.slideTo(0)}if("undefined"==typeof KUTE)throw Error("Spicr requires KUTE.js ^2.0.10");n.fromTo=KUTE.fromTo;function u(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new c(t)}))}n.carousel=function(t,e,a,i,l){var c,u,f=[],m=s(t),d={},p={},g={},y={},h=e[a]&&o(e[a]),v=o(e[i]),x=m.translate,z=m.rotate,A=m.scale,b=t.getAttribute("data-transform-origin"),L=m.opacity,C=m.duration||500,E=m.delay||parseInt(C)/2,T=m.easing;return L&&(d.opacity=1,p.opacity=0,g.opacity=0,y.opacity=1),(A||x||z)&&(d.transform={},p.transform={},g.transform={},y.transform={}),A&&(d.transform.scale=1,p.transform.scale=A,g.transform.scale=A,y.transform.scale=1),x&&(d.transform.translate3d=[0,0,0],p.transform.translate3d=[x.x?l?-x.x:x.x:0,x.y?l?-x.y:x.y:0,x.z?l?-x.z:x.z:0],g.transform.translate3d=[x.x?l?x.x:-x.x:0,x.y?l?x.y:-x.y:0,x.z?l?x.z:-x.z:0],y.transform.translate3d=[0,0,0]),z&&(d.transform.rotate3d=[0,0,0],p.transform.rotate3d=[z.x?l?-z.x:z.x:0,z.y?l?-z.y:z.y:0,z.z?l?-z.z:z.z:0],g.transform.rotate3d=[z.x?l?z.x:-z.x:0,z.y?l?z.y:-z.y:0,z.z?l?z.z:-z.z:0],y.transform.rotate3d=[0,0,0]),L||z||x||A||(C=50,E=0),c=u={easing:T,duration:C},l||(h&&h.reverse(),v.reverse()),h&&h.map((function(t,e){if(c.delay=150*e,f.push(n.fromTo(t,d,p,c)),b){var a=b?r(t,b):{};t.style.transformOrigin=("x"in a?a.x+"px":"50%")+" "+("y"in a?a.y+"px":"50%")+" "+("z"in a?a.z+"px":"")}})),v.map((function(t,e){if(u.delay=(E+50)*e,f.push(n.fromTo(t,g,y,u)),b){var a=b?r(t,b):{};t.style.transformOrigin=("x"in a?a.x+"px":"50%")+" "+("y"in a?a.y+"px":"50%")+" "+("z"in a?a.z+"px":"")}})),f},n.layer=function(t,e,a){var r,i=a||s(t),o={},l={},c=i.translate,u=i.rotate,f=i.scale,m=i.opacity,d=i.origin,p=i.duration,g=i.delay,y=i.easing;if(y=/InOut/.test(y)||a?y:e?y.replace("In","Out"):y.replace("Out","In"),g=e?g:0,m&&(o.opacity=e?0:1,l.opacity=e?1:0),(f||c||u)&&(o.transform={},l.transform={},d&&(t.style.transformOrigin=("x"in d?d.x+"px":"50%")+" "+("y"in d?d.y+"px":"50%")+" "+("z"in d?d.z+"px":""))),f&&(o.transform.scale=e?f:1,l.transform.scale=e?1:f),c){var h=e&&c.x?c.x:0,v=c.x&&!e?c.x:0,x=e&&c.y?c.y:0,z=c.y&&!e?c.y:0,A=e&&c.z?c.z:0,b=c.z&&!e?c.z:0;o.transform.translate3d=[h,x,A],l.transform.translate3d=[v,z,b]}if(u){var L=e&&u.x?u.x:0,C=!e&&u.x?u.x:0,E=e&&u.y?u.y:0,T=!e&&u.y?u.y:0,I=e&&u.z?u.z:0,N=!e&&u.z?u.z:0;o.transform.rotate3d=[L,E,I],l.transform.rotate3d=[C,T,N]}return m||u||c||f||(p=50,g=0),r={easing:y,duration:p,delay:g},n.fromTo(t,o,l,r)},n.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},c.initComponent=u,document.body?u():document.addEventListener("DOMContentLoaded",(function t(){u(),document.removeEventListener("DOMContentLoaded",t)}));export default c;
