// Spicr v1.0.1 | thednp Â© 2020 | MIT-License
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Spicr=n()}(this,(function(){"use strict";var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),n="ontouchstart"in window||navigator.msMaxTouchPoints||!1,e="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],i={};function a(t,n){var e=n.trim().split(/[,|;]/),i={};return e.map((function(n){var e=n.split(/[:|=]/),a=e[0],r=e[1],o=/y/i.test(a)||/v/i.test(r)?"offsetHeight":"offsetWidth";i[a]=/%/.test(r)?parseFloat(r)*t[o]/100:parseFloat(r)})),i}function r(t){var n=t.getAttribute("data-translate"),e=t.getAttribute("data-rotate"),i=t.getAttribute("data-scale"),r=t.getAttribute("data-transform-origin"),o=t.getAttribute("data-opacity"),s=t.getAttribute("data-duration"),u=t.getAttribute("data-delay"),c=t.getAttribute("data-easing");return{translate:n?a(t,n):"",rotate:e?a(t,e):"",origin:r?a(t,r):"",scale:i?parseFloat(i):"",opacity:"false"!==o?1:0,duration:isNaN(s)?500:parseInt(s),delay:isNaN(u)?0:parseInt(u),easing:c||"easingCubicOut"}}function o(t,n,e){var a=t[n]||t[0],o=t[e],s=[],u=a.getElementsByClassName("item-bg")[0],c=o&&o.getElementsByClassName("item-bg")[0],l=c&&r(c);for(var f in l)if(/translate|rotate/.test(f))for(var p in l[f])l[f][p]=-l[f][p];else"opacity"===f&&(l[f]=0);return-1===n?u&&s.push(i.layer(u,1)):(u&&s.push(i.layer(u,0,l)),c&&s.push(i.layer(c,1))),s}function s(t){var n=[],e=t.getElementsByClassName("spicr-layer"),i=t.getElementsByClassName("item-bg")[0];return Array.from(e).map((function(t){return t!==i&&n.push(t)})),n}function u(t){var n=s(t),e=[],a=!t.classList.contains("active");return n.map((function(t){e.push(i.layer(t,a))})),e}function c(a,r){a=function(t,n){var e=n&&n instanceof Element?n:document;return t instanceof Element?t:e.querySelector(t)}(a),r=r||{};var s=this,c=s.tweens=[],l=n&&t?["touchstart","touchend"]:e,f=a.getAttribute("data-interval"),p=a.getAttribute("data-pause"),h=!1!==r.pause&&"false"!==p&&"hover",d=!1===r.interval||0===parseInt(f)||"false"===f?0:"number"==typeof r.interval?r.interval:isNaN(f)?5e3:parseInt(f),m=a.getElementsByClassName("item"),g=a.querySelectorAll("[data-slide]"),v=g.length&&g[0],y=g.length&&g[1],I=a.getElementsByClassName("spicr-pages")[0],x=I&&I.querySelectorAll("[data-slide-to]"),O=null,_=null,E=null,M=0,b=a.classList.contains("spicr-slider"),w=a.classList.contains("spicr-carousel");function T(){a.classList.contains("paused")||(a.classList.add("paused"),!M&&(clearInterval(O),O=null))}function C(){a.classList.contains("paused")&&(a.classList.remove("paused"),!M&&(clearInterval(O),O=null),!M&&s.cycle())}function A(t){if(t.preventDefault(),!M){var n=t.target,e=n&&n.getAttribute("data-slide-to");return n&&!n.classList.contains("active")&&e&&(E=parseInt(e),s.slideTo(E)),!1}}function S(t){if(t.preventDefault(),!M){this===y||y.contains(this)?E++:(this===v||v.contains(this))&&E--,s.slideTo(E)}}function z(t){t=t?"addEventListener":"removeEventListener","hover"===h&&d&&(a[t](l[0],T),a[t](l[1],C)),y&&y[t]("click",S),v&&v[t]("click",S),I&&I[t]("click",A)}function L(t){Array.from(x).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function B(t){E=t,m[t].classList.add("next"),M=!0}function N(t,n){m[n].classList.add("active"),m[n].classList.remove("next"),m[t]&&m[t].classList.remove("active"),setTimeout((function(){w&&(a.style.height=""),i.reset(a),M=!1,c=[],d&&!a.classList.contains("paused")&&s.cycle()}),0)}this.getActiveIndex=function(){var t=a.getElementsByClassName("item active")[0];return Array.from(m).indexOf(t)},this.cycle=function(){clearInterval(O),O=setTimeout((function(){E++,s.slideTo(E)}),d)},this.slideTo=function(t){var n=this.getActiveIndex();n===t||M||(clearInterval(O),O=setTimeout((function(){if(n<t||0===n&&t===m.length-1?_=1:(n>t||n===m.length-1&&0===t)&&(_=0),t<0?t=m.length-1:t>=m.length&&(t=0),b){B(t);var e=-1!==n?o(m,n,t):o(m,n),r=u(-1!==n?m[n]:m[0]),s=-1!==n&&u(m[t]),l=[];-1===n?(e.length&&(l=e,c=c.concat(e),r.length&&(l=r,e[e.length-1].chain(r))),l.length&&(l[l.length-1]._onComplete=function(){return N(n,t)}),c.length&&c[0].start()):(r.length&&(c=c.concat(r),l=r),e.length&&(c=c.concat(e),l.length&&l[l.length-1].chain(e),l=e),s.length&&(c=c.concat(s),l.length&&l[l.length-1].chain(s),l=s),l.length&&(l[l.length-1]._onComplete=function(){return N(n,t)}),r.length?r.map((function(t){return t.start()})):e.length?animatetBg.map((function(t){return t.start()})):s.length&&s.map((function(t){return t.start()}))),x&&L(x[t]),l.length||N(n,t)}else if(w){if(B(t),(c=i.carousel(a,m,n,t,_)).length){if(c[c.length-1]._onComplete=function(){return N(n,t)},m[n]&&m[n].offsetHeight!==m[t].offsetHeight){var f=a.getAttribute("data-easing"),p=a.getAttribute("data-duration");c.push(i.fromTo(a,{height:parseFloat(getComputedStyle(m[n]).height)},{height:parseFloat(getComputedStyle(m[t]).height)},{easing:f||"easingCubicOut",duration:isNaN(p)?500:parseInt(p)}))}c.map((function(t){return t.start()}))}else N(n,t);x&&L(x[t])}}),1))},this.dispose=function(){M&&c.map((function(t){return t.stop()})),i.reset(a),z(),clearInterval(O),delete a.Spicr},a.Spicr&&a.Spicr.dispose(),z(1),a.Spicr=s,a.getElementsByClassName("item active").length?d&&s.cycle():s.slideTo(0)}var l={},f=[],p="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},h={},d={},m={};m.now=self.performance.now.bind(self.performance);var g=0,v=function(t){for(var n=0;n<f.length;)f[n].update(t)?n++:f.splice(n,1);g=requestAnimationFrame(v)};function y(){setTimeout((function(){if(!f.length&&g){for(var t in cancelAnimationFrame(g),g=null,d)if("function"==typeof d[t])l[t]&&delete l[t];else for(var n in d[t])l[n]&&delete l[n];for(var e in h)l[e]&&delete l[e]}}),64)}var I={Tick:g,Ticker:v,Tweens:f,Time:m};for(var x in I)l[x]||(l[x]="Time"===x?m.now:I[x]);p._KUTE=l;var O={duration:700,delay:0,easing:"linear"},_={},E={},M={defaultOptions:O,linkProperty:_,onStart:d,onComplete:E},b={},w={},T={linear:function(t){return t},easingSinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},easingSinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},easingSinusoidalInOut:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easingQuadraticIn:function(t){return t*t},easingQuadraticOut:function(t){return t*(2-t)},easingQuadraticInOut:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easingCubicIn:function(t){return t*t*t},easingCubicOut:function(t){return--t*t*t+1},easingCubicInOut:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easingQuarticIn:function(t){return t*t*t*t},easingQuarticOut:function(t){return 1- --t*t*t*t},easingQuarticInOut:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easingQuinticIn:function(t){return t*t*t*t*t},easingQuinticOut:function(t){return 1+--t*t*t*t*t},easingQuinticInOut:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easingCircularIn:function(t){return-(Math.sqrt(1-t*t)-1)},easingCircularOut:function(t){return Math.sqrt(1-(t-=1)*t)},easingCircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easingExponentialIn:function(t){return Math.pow(2,10*(t-1))-.001},easingExponentialOut:function(t){return 1-Math.pow(2,-10*t)},easingExponentialInOut:function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))},easingBackIn:function(t){var n=1.70158;return t*t*((n+1)*t-n)},easingBackOut:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},easingBackInOut:function(t){var n=2.5949095;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)},easingElasticIn:function(t){var n,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,n=.1):n=.4*Math.asin(1/e)/Math.PI*2,-e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*Math.PI*2/.4))},easingElasticOut:function(t){var n,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,n=.1):n=.4*Math.asin(1/e)/Math.PI*2,e*Math.pow(2,-10*t)*Math.sin((t-n)*Math.PI*2/.4)+1)},easingElasticInOut:function(t){var n,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,n=.1):n=.4*Math.asin(1/e)/Math.PI*2,(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*Math.PI*2/.4)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*Math.PI*2/.4)*.5+1)},easingBounceIn:function(t){return 1-T.easingBounceOut(1-t)},easingBounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easingBounceInOut:function(t){return t<.5?.5*T.easingBounceIn(2*t):.5*T.easingBounceOut(2*t-1)+.5}};function C(t){return f.push(t)}function A(t){var n=f.indexOf(t);-1!==n&&f.splice(n,1)}w.processEasing=function(t){return"function"==typeof t?t:"function"==typeof T[t]?T[t]:T.linear};var S={};function z(){var t=this,n=function(n){var e=_[n],i=S[n];for(var a in e)if("function"==typeof e[a]&&Object.keys(t.valuesEnd).some((function(n){return i&&i.includes(n)||"attr"===n&&Object.keys(t.valuesEnd[n]).some((function(t){return i&&i.includes(t)}))})))!l[a]&&(l[a]=e[a]);else for(var r in t.valuesEnd)for(var o in t.valuesEnd[r])if("function"==typeof e[o])!l[o]&&(l[o]=e[o]);else for(var s in e[a])e[o]&&"function"==typeof e[o][s]&&!l[s]&&(l[s]=e[o][s])};for(var e in _)n(e)}var L={add:C,remove:A,getAll:function(){return f},removeAll:function(){f.length=0},stop:y,linkInterpolation:z};function B(t,n){try{return n?t instanceof HTMLCollection||t instanceof NodeList||t instanceof Array&&t.every((function(t){return t instanceof Element}))?t:document.querySelectorAll(t):t instanceof Element||t===window?t:document.querySelector(t)}catch(n){console.error("KUTE.js - Element(s) not found: "+t+".")}}var N=function(t){return this.setComponent(t)};N.prototype.setComponent=function(t){var n=t.component,e={onStart:d,onComplete:E},i=t.category,a=t.property;if(S[n]=t.properties||t.subProperties||t.property,t.defaultOptions)for(var r in t.defaultOptions)O[r]=t.defaultOptions[r];if(t.functions)for(var o in e)if(o in t.functions)if("function"==typeof t.functions[o])!e[o][n]&&(e[o][n]={}),!e[o][n][i||a]&&(e[o][n][i||a]=t.functions[o]);else for(var s in t.functions[o])!e[o][n]&&(e[o][n]={}),!e[o][n][s]&&(e[o][n][s]=t.functions[o][s]);if(t.Interpolate){for(var u in t.Interpolate){var c=t.Interpolate[u];if("function"!=typeof c||h[u])for(var l in c)"function"!=typeof c[l]||h[u]||(h[u]=c[l]);else h[u]=c}_[n]=t.Interpolate}if(t.Util)for(var f in t.Util)!b[f]&&(b[f]=t.Util[f]);return{name:n}};var k=function(t,n,e,i){for(var a in this.element=t,this.playing=!1,this._startTime=null,this._startFired=!1,this.valuesEnd=e,this.valuesStart=n,i=i||{},this._resetStart=i.resetStart||0,this._easing="function"==typeof i.easing?i.easing:w.processEasing(i.easing),this._duration=i.duration||O.duration,this._delay=i.delay||O.delay,i){var r="_"+a;r in this||(this[r]=i[a])}var o=this._easing.name;return d[o]||(d[o]=function(t){!l[t]&&t===this._easing.name&&(l[t]=this._easing)}),this};function P(t,n,e,i){return i=i||{},new w.tween(B(t),n,e,i)}function q(t,n,e,i){return"perspective("+(1e3*(t+(n-t)*i)>>0)/1e3+e+")"}function F(t,n,e,i){for(var a=[],r=0;r<3;r++)a[r]=(t[r]||n[r]?(1e3*(t[r]+(n[r]-t[r])*i)>>0)/1e3:0)+e;return"translate3d("+a.join(",")+")"}function Q(t,n,e,i){var a="";return a+=t[0]||n[0]?"rotateX("+(1e3*(t[0]+(n[0]-t[0])*i)>>0)/1e3+e+")":"",a+=t[1]||n[1]?"rotateY("+(1e3*(t[1]+(n[1]-t[1])*i)>>0)/1e3+e+")":"",a+=t[2]||n[2]?"rotateZ("+(1e3*(t[2]+(n[2]-t[2])*i)>>0)/1e3+e+")":""}function j(t,n,e){return"scale("+(1e3*(t+(n-t)*e)>>0)/1e3+")"}function U(t,n,e,i){var a=[];return a[0]=(t[0]===n[0]?n[0]:(1e3*(t[0]+(n[0]-t[0])*i)>>0)/1e3)+e,a[1]=t[1]||n[1]?(t[1]===n[1]?n[1]:(1e3*(t[1]+(n[1]-t[1])*i)>>0)/1e3)+e:"0","skew("+a.join(",")+")"}k.prototype.start=function(t){if(C(this),this.playing=!0,this._startTime=void 0!==t?t:l.Time(),this._startTime+=this._delay,!this._startFired){for(var n in this._onStart&&this._onStart.call(this),d)if("function"==typeof d[n])d[n].call(this,n);else for(var e in d[n])d[n][e].call(this,e);z.call(this),this._startFired=!0}return!g&&v(),this},k.prototype.stop=function(){return this.playing&&(A(this),this.playing=!1,this._onStop&&this._onStop.call(this),this.close()),this},k.prototype.close=function(){for(var t in E)for(var n in E[t])E[t][n].call(this,n);this._startFired=!1,y.call(this)},k.prototype.chain=function(t){return this._chain=[],this._chain=t.length?t:this._chain.concat(t),this},k.prototype.stopChainedTweens=function(){this._chain&&this._chain.length&&this._chain.map((function(t){return t.stop()}))},k.prototype.update=function(t){var n,e;if((t=void 0!==t?t:l.Time())<this._startTime&&this.playing)return!0;for(var i in n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,e=this._easing(n),this.valuesEnd)l[i](this.element,this.valuesStart[i],this.valuesEnd[i],e);return this._onUpdate&&this._onUpdate.call(this),1!==n||(this._onComplete&&this._onComplete.call(this),this.playing=!1,this.close(),void 0!==this._chain&&this._chain.length&&this._chain.map((function(t){return t.start()})),!1)},w.tween=k;var D={component:"baseTransform",property:"transform",functions:{onStart:function(t){!l[t]&&this.valuesEnd[t]&&(l[t]=function(n,e,i,a){n.style[t]=(e.perspective||i.perspective?q(e.perspective,i.perspective,"px",a):"")+(e.translate3d?F(e.translate3d,i.translate3d,"px",a):"")+(e.rotate3d?Q(e.rotate3d,i.rotate3d,"deg",a):"")+(e.skew?U(e.skew,i.skew,"deg",a):"")+(e.scale||i.scale?j(e.scale,i.scale,a):"")})}},Interpolate:{perspective:q,translate3d:F,rotate3d:Q,translate:function(t,n,e,i){var a=[];return a[0]=(t[0]===n[0]?n[0]:(1e3*(t[0]+(n[0]-t[0])*i)>>0)/1e3)+e,a[1]=t[1]||n[1]?(t[1]===n[1]?n[1]:(1e3*(t[1]+(n[1]-t[1])*i)>>0)/1e3)+e:"0","translate("+a.join(",")+")"},rotate:function(t,n,e,i){return"rotate("+(1e3*(t+(n-t)*i)>>0)/1e3+e+")"},scale:j,skew:U}};function H(t,n,e){return(t=+t)+(n-=t)*e}var K={component:"baseOpacity",property:"opacity",Interpolate:{numbers:H},functions:{onStart:function(t){t in this.valuesEnd&&!l[t]&&(l[t]=function(n,e,i,a){n.style[t]=(1e3*H(e,i,a)>>0)/1e3})}}};function R(t){t in this.valuesEnd&&!l[t]&&(l[t]=function(n,e,i,a){n.style[t]=(a>.99||a<.01?(10*H(e,i,a)>>0)/10:H(e,i,a)>>0)+"px"})}var W=["top","left","width","height"],X={};W.map((function(t){return X[t]=R}));var Y={component:"baseBoxModel",category:"boxModel",properties:W,Interpolate:{numbers:H},functions:{onStart:X}};i.fromTo=P;var Z={Animation:N,Components:{Transform:new N(D),Opacity:new N(K),BoxModel:new N(Y)},Tween:k,fromTo:P,Objects:M,Easing:T,Util:b,Render:I,Interpolate:h,Internals:L,Selector:B};for(var G in Z)c[G]=Z[G];function J(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new c(t)}))}return i.carousel=function(t,n,e,o,u){var c,l,f=[],p=r(t),h={},d={},m={},g={},v=n[e]&&s(n[e]),y=s(n[o]),I=p.translate,x=p.rotate,O=p.scale,_=t.getAttribute("data-transform-origin"),E=p.opacity,M=p.duration||500,b=p.delay||parseInt(M)/2,w=p.easing;return E&&(h.opacity=1,d.opacity=0,m.opacity=0,g.opacity=1),(O||I||x)&&(h.transform={},d.transform={},m.transform={},g.transform={}),O&&(h.transform.scale=1,d.transform.scale=O,m.transform.scale=O,g.transform.scale=1),I&&(h.transform.translate3d=[0,0,0],d.transform.translate3d=[I.x?u?-I.x:I.x:0,I.y?u?-I.y:I.y:0,I.z?u?-I.z:I.z:0],m.transform.translate3d=[I.x?u?I.x:-I.x:0,I.y?u?I.y:-I.y:0,I.z?u?I.z:-I.z:0],g.transform.translate3d=[0,0,0]),x&&(h.transform.rotate3d=[0,0,0],d.transform.rotate3d=[x.x?u?-x.x:x.x:0,x.y?u?-x.y:x.y:0,x.z?u?-x.z:x.z:0],m.transform.rotate3d=[x.x?u?x.x:-x.x:0,x.y?u?x.y:-x.y:0,x.z?u?x.z:-x.z:0],g.transform.rotate3d=[0,0,0]),E||x||I||O||(M=50,b=0),c=l={easing:w,duration:M},u||(v&&v.reverse(),y.reverse()),v&&v.map((function(t,n){if(c.delay=150*n,f.push(i.fromTo(t,h,d,c)),_){var e=_?a(t,_):{};t.style.transformOrigin=("x"in e?e.x+"px":"50%")+" "+("y"in e?e.y+"px":"50%")+" "+("z"in e?e.z+"px":"")}})),y.map((function(t,n){if(l.delay=(b+50)*n,f.push(i.fromTo(t,m,g,l)),_){var e=_?a(t,_):{};t.style.transformOrigin=("x"in e?e.x+"px":"50%")+" "+("y"in e?e.y+"px":"50%")+" "+("z"in e?e.z+"px":"")}})),f},i.layer=function(t,n,e){var a,o=e||r(t),s={},u={},c=o.translate,l=o.rotate,f=o.scale,p=o.opacity,h=o.origin,d=o.duration,m=o.delay,g=o.easing;if(g=/InOut/.test(g)||e?g:n?g.replace("In","Out"):g.replace("Out","In"),m=n?m:0,p&&(s.opacity=n?0:1,u.opacity=n?1:0),(f||c||l)&&(s.transform={},u.transform={},h&&(t.style.transformOrigin=("x"in h?h.x+"px":"50%")+" "+("y"in h?h.y+"px":"50%")+" "+("z"in h?h.z+"px":""))),f&&(s.transform.scale=n?f:1,u.transform.scale=n?1:f),c){var v=n&&c.x?c.x:0,y=c.x&&!n?c.x:0,I=n&&c.y?c.y:0,x=c.y&&!n?c.y:0,O=n&&c.z?c.z:0,_=c.z&&!n?c.z:0;s.transform.translate3d=[v,I,O],u.transform.translate3d=[y,x,_]}if(l){var E=n&&l.x?l.x:0,M=!n&&l.x?l.x:0,b=n&&l.y?l.y:0,w=!n&&l.y?l.y:0,T=n&&l.z?l.z:0,C=!n&&l.z?l.z:0;s.transform.rotate3d=[E,b,T],u.transform.rotate3d=[M,w,C]}return p||l||c||f||(d=50,m=0),a={easing:g,duration:d,delay:m},i.fromTo(t,s,u,a)},i.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},c.initComponent=J,document.body?J():document.addEventListener("DOMContentLoaded",(function t(){J(),document.removeEventListener("DOMContentLoaded",t)})),c}));
