// Spicr Standalone v1.0.4 | thednp Â© 2020 | MIT-License
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Spicr=e()}(this,(function(){"use strict";var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,n="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],r=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t,e)}),e)}catch(t){}return t}()&&{passive:!0},i={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},a={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseout"},o={};function s(t,e,n){var r=e.trim().split(/[,|;]/),i={};return r.map((function(e){var r=e.split(/[:|=]/),a=r[0],o=r[1],s=/y/i.test(a)||/v/i.test(o)?"offsetHeight":"offsetWidth";i[a]=n&&/%/.test(o)&&!/z/i.test(a)?o:/%/.test(o)?parseFloat(o)*t[s]/100:parseFloat(o)})),i}function c(t){var e=t.getAttribute("data-translate"),n=t.getAttribute("data-rotate"),r=parseFloat(t.getAttribute("data-scale")),i=t.getAttribute("data-transform-origin"),a=t.getAttribute("data-opacity"),o=parseInt(t.getAttribute("data-duration")),c=parseInt(t.getAttribute("data-delay")),u=t.getAttribute("data-easing");return{translate:e?s(t,e):"",rotate:n?s(t,n):"",origin:i?s(t,i,1):"",scale:isNaN(r)?"":r,opacity:"false"!==a?1:0,duration:isNaN(o)?500:o,delay:isNaN(c)?0:c,easing:u||"easingCubicOut"}}function u(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function l(t,e,n){var r=t[e]||t[0],i=u(r),a=r.classList.contains("active"),s=t[n],l=s&&s.getElementsByClassName("item-bg")[0],f=l?c(l):0;for(var d in f)if(/translate|rotate/.test(d))for(var p in f[d])f[d][p]=-f[d][p];return f?i.map((function(t){return o.layer(t,0,f)})):i.map((function(t){return o.layer(t,a?0:1)}))}function f(s,c){s=function(t,e){var n=e&&e instanceof Element?e:document;return t instanceof Element?t:n.querySelector(t)}(s),c=c||{};var u=this,f=u.tweens=[],d={},p=e&&t?["touchstart","touchend"]:n,h=e&&t?i:a,m=s.getAttribute("data-interval"),y=s.getAttribute("data-pause"),v=s.getAttribute("data-touch"),g=!1!==c.pause&&"false"!==y&&"hover",x=!1===c.touch||"false"===v?0:1,T=!1===c.interval||0===parseInt(m)||"false"===m?0:"number"==typeof c.interval?c.interval:isNaN(m)?5e3:parseInt(m),S=s.getElementsByClassName("item"),_=s.querySelectorAll("[data-slide]"),b=_.length&&_[0],C=_.length&&_[1],E=s.getElementsByClassName("spicr-pages")[0],I=E&&E.querySelectorAll("[data-slide-to]"),O=null,A=null,w=0,L=0,M=s.classList.contains("spicr-slider"),z=s.classList.contains("spicr-carousel");function k(){s.classList.contains("paused")||(s.classList.add("paused"),!L&&(clearInterval(O),O=null))}function N(){s.classList.contains("paused")&&(s.classList.remove("paused"),!L&&(clearInterval(O),O=null),!L&&u.cycle())}function X(t){if(t.preventDefault(),!L){var e=t.target,n=e&&e.getAttribute("data-slide-to");return e&&!e.classList.contains("active")&&n&&(w=parseInt(n),u.slideTo(w)),!1}}function B(t){if(t.preventDefault(),!L){this===C||C.contains(this)?w++:(this===b||b.contains(this))&&w--,u.slideTo(w)}}function q(t){t=t?"addEventListener":"removeEventListener","hover"===g&&T&&(s[t](p[0],k),s[t](p[1],N)),C&&C[t]("click",B),b&&b[t]("click",B),x&&S.length>1&&s[t](h.start,F,r),E&&E[t]("click",X)}function F(t){d.isTouch||(d.startX=t.changedTouches?t.changedTouches[0].pageX:t.pageX,s.contains(t.target)&&(d.isTouch=!0,D(1)))}function D(t){s[t=t?"addEventListener":"removeEventListener"](h.move,U,r),s[t](h.end,P,r)}function U(t){if(d.isTouch)return d.currentX=t.changedTouches?t.changedTouches[0].pageX:t.pageX,"touchmove"===t.type&&t.changedTouches.length>1?(t.preventDefault(),!1):void 0}function P(t){if(d.isTouch&&!L&&(d.endX=d.currentX?d.currentX:t.changedTouches?t.changedTouches[0].pageX:t.pageX,d.isTouch)){if((!s.contains(t.target)||!s.contains(t.relatedTarget))&&Math.abs(d.startX-d.endX)<75)return!1;d.currentX<d.startX?d.index++:d.currentX>d.startX&&d.index--,d.isTouch=!1,u.slideTo(d.index),D()}}function j(t){Array.from(I).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function H(t,e){w=e,S[e].classList.add("next"),L=!0,z&&t>-1&&S[t].offsetHeight!==S[e].offsetHeight&&(s.style.height=getComputedStyle(S[t]).height)}function K(t,e){S[e].classList.add("active"),S[e].classList.remove("next"),S[t]&&S[t].classList.remove("active"),setTimeout((function(){z&&(s.style.height=""),o.reset(s),L=!1,f=[],T&&!s.classList.contains("paused")&&u.cycle()}),0)}this.getActiveIndex=function(){var t=s.getElementsByClassName("item active")[0];return Array.from(S).indexOf(t)},this.cycle=function(){clearInterval(O),O=setTimeout((function(){w++,u.slideTo(w)}),T)},this.slideTo=function(t){var e=this.getActiveIndex();e===t||L||(clearInterval(O),O=setTimeout((function(){if(e<t||0===e&&t===S.length-1?A=1:(e>t||e===S.length-1&&0===t)&&(A=0),t<0?t=S.length-1:t>=S.length&&(t=0),M){H(e,t);var n=-1!==e?l(S,e,t):l(S,e),r=-1!==e&&l(S,t);-1===e?n.length&&(f=f.concat(n)):(n.length&&(f=f.concat(n)),r.length&&(f=f.concat(r))),f.length?(f.reduce((function(t,e){return t._duration+t._delay>e._duration+e._delay?t:e}))._onComplete=function(){return K(e,t)},f.map((function(t){return t.start()}))):K(e,t),I&&j(I[t])}else if(z){if(H(e,t),(f=o.carousel(s,S,e,t,A)).length){if(f[f.length-1]._onComplete=function(){return K(e,t)},S[e]&&S[e].offsetHeight!==S[t].offsetHeight){var i=s.getAttribute("data-easing"),a=s.getAttribute("data-duration");f.push(o.fromTo(s,{height:parseFloat(getComputedStyle(S[e]).height)},{height:parseFloat(getComputedStyle(S[t]).height)},{easing:i||"easingCubicOut",duration:isNaN(a)?500:parseInt(a),delay:250}))}f.map((function(t){return t.start()}))}else K(e,t);I&&j(I[t])}}),1))},this.dispose=function(){L&&f.map((function(t){return t.stop()})),o.reset(s),d={},q(),clearInterval(O),delete s.Spicr},s.Spicr&&s.Spicr.dispose(),q(1),s.Spicr=u,s.getElementsByClassName("item active").length?T&&u.cycle():u.slideTo(0)}var d={},p=[],h="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},m={},y={},v={};v.now=self.performance.now.bind(self.performance);var g=0,x=function(t){for(var e=0;e<p.length;)p[e].update(t)?e++:p.splice(e,1);g=requestAnimationFrame(x)};function T(){setTimeout((function(){if(!p.length&&g){for(var t in cancelAnimationFrame(g),g=null,y)if("function"==typeof y[t])d[t]&&delete d[t];else for(var e in y[t])d[e]&&delete d[e];for(var n in m)d[n]&&delete d[n]}}),64)}var S={Tick:g,Ticker:x,Tweens:p,Time:v};for(var _ in S)d[_]||(d[_]="Time"===_?v.now:S[_]);h._KUTE=d;var b={duration:700,delay:0,easing:"linear"},C={},E={},I={defaultOptions:b,linkProperty:C,onStart:y,onComplete:E},O={},A={},w={linear:function(t){return t},easingQuadraticIn:function(t){return t*t},easingQuadraticOut:function(t){return t*(2-t)},easingQuadraticInOut:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easingCubicIn:function(t){return t*t*t},easingCubicOut:function(t){return--t*t*t+1},easingCubicInOut:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easingCircularIn:function(t){return-(Math.sqrt(1-t*t)-1)},easingCircularOut:function(t){return Math.sqrt(1-(t-=1)*t)},easingCircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easingBackIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easingBackOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},easingBackInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}};function L(t){return p.push(t)}function M(t){var e=p.indexOf(t);-1!==e&&p.splice(e,1)}A.processEasing=function(t){return"function"==typeof t?t:"function"==typeof w[t]?w[t]:w.linear};var z={};function k(){var t=this,e=function(e){var n=C[e],r=z[e];for(var i in n)if("function"==typeof n[i]&&Object.keys(t.valuesEnd).some((function(e){return r&&r.includes(e)||"attr"===e&&Object.keys(t.valuesEnd[e]).some((function(t){return r&&r.includes(t)}))})))!d[i]&&(d[i]=n[i]);else for(var a in t.valuesEnd)for(var o in t.valuesEnd[a])if("function"==typeof n[o])!d[o]&&(d[o]=n[o]);else for(var s in n[i])n[o]&&"function"==typeof n[o][s]&&!d[s]&&(d[s]=n[o][s])};for(var n in C)e(n)}var N={add:L,remove:M,getAll:function(){return p},removeAll:function(){p.length=0},stop:T,linkInterpolation:k};function X(t,e){try{return e?t instanceof HTMLCollection||t instanceof NodeList||t instanceof Array&&t.every((function(t){return t instanceof Element}))?t:document.querySelectorAll(t):t instanceof Element||t===window?t:document.querySelector(t)}catch(e){console.error("KUTE.js - Element(s) not found: "+t+".")}}var B=function(t){return this.setComponent(t)};B.prototype.setComponent=function(t){var e=t.component,n={onStart:y,onComplete:E},r=t.category,i=t.property;if(z[e]=t.properties||t.subProperties||t.property,t.defaultOptions)for(var a in t.defaultOptions)b[a]=t.defaultOptions[a];if(t.functions)for(var o in n)if(o in t.functions)if("function"==typeof t.functions[o])!n[o][e]&&(n[o][e]={}),!n[o][e][r||i]&&(n[o][e][r||i]=t.functions[o]);else for(var s in t.functions[o])!n[o][e]&&(n[o][e]={}),!n[o][e][s]&&(n[o][e][s]=t.functions[o][s]);if(t.Interpolate){for(var c in t.Interpolate){var u=t.Interpolate[c];if("function"!=typeof u||m[c])for(var l in u)"function"!=typeof u[l]||m[c]||(m[c]=u[l]);else m[c]=u}C[e]=t.Interpolate}if(t.Util)for(var f in t.Util)!O[f]&&(O[f]=t.Util[f]);return{name:e}};var q=function(t,e,n,r){for(var i in this.element=t,this.playing=!1,this._startTime=null,this._startFired=!1,this.valuesEnd=n,this.valuesStart=e,r=r||{},this._resetStart=r.resetStart||0,this._easing="function"==typeof r.easing?r.easing:A.processEasing(r.easing),this._duration=r.duration||b.duration,this._delay=r.delay||b.delay,r){var a="_"+i;a in this||(this[a]=r[i])}var o=this._easing.name;return y[o]||(y[o]=function(t){!d[t]&&t===this._easing.name&&(d[t]=this._easing)}),this};function F(t,e,n){return(t=+t)+(e-=t)*n}function D(t,e,n){for(var r=[],i=0,a=e.length;i<a;i++)r[i]=(1e3*(t[i]+(e[i]-t[i])*n)>>0)/1e3;return r}q.prototype.start=function(t){if(L(this),this.playing=!0,this._startTime=void 0!==t?t:d.Time(),this._startTime+=this._delay,!this._startFired){for(var e in this._onStart&&this._onStart.call(this),y)if("function"==typeof y[e])y[e].call(this,e);else for(var n in y[e])y[e][n].call(this,n);k.call(this),this._startFired=!0}return!g&&x(),this},q.prototype.stop=function(){return this.playing&&(M(this),this.playing=!1,this._onStop&&this._onStop.call(this),this.close()),this},q.prototype.close=function(){for(var t in E)for(var e in E[t])E[t][e].call(this,e);this._startFired=!1,T.call(this)},q.prototype.chain=function(t){return this._chain=[],this._chain=t.length?t:this._chain.concat(t),this},q.prototype.stopChainedTweens=function(){this._chain&&this._chain.length&&this._chain.map((function(t){return t.stop()}))},q.prototype.update=function(t){var e,n;if((t=void 0!==t?t:d.Time())<this._startTime&&this.playing)return!0;for(var r in e=(t-this._startTime)/this._duration,e=0===this._duration||e>1?1:e,n=this._easing(e),this.valuesEnd)d[r](this.element,this.valuesStart[r],this.valuesEnd[r],n);return this._onUpdate&&this._onUpdate.call(this),1!==e||(this._onComplete&&this._onComplete.call(this),this.playing=!1,this.close(),void 0!==this._chain&&this._chain.length&&this._chain.map((function(t){return t.start()})),!1)},A.tween=q;var U="undefined"!=typeof DOMMatrix?DOMMatrix:"undefined"!=typeof WebKitCSSMatrix?WebKitCSSMatrix:"undefined"!=typeof CSSMatrix?CSSMatrix:"undefined"!=typeof MSCSSMatrix?MSCSSMatrix:null,P={component:"transformMatrixBase",property:"transform",functions:{onStart:{transform:function(t){this.valuesEnd[t]&&!d[t]&&(d[t]=function(e,n,r,i){var a=new U,o={};for(var s in r)o[s]="perspective"===s?F(n[s],r[s],i):D(n[s],r[s],i);o.perspective&&(a.m34=-1/o.perspective),a=o.translate3d?a.translate(o.translate3d[0],o.translate3d[1],o.translate3d[2]):a,a=o.rotate3d?a.rotate(o.rotate3d[0],o.rotate3d[1],o.rotate3d[2]):a,o.skew&&(a=o.skew[0]?a.skewX(o.skew[0]):a,a=o.skew[1]?a.skewY(o.skew[1]):a),a=o.scale3d?a.scale(o.scale3d[0],o.scale3d[1],o.scale3d[2]):a,e.style[t]=a.toString()})},CSS3Matrix:function(t){this.valuesEnd.transform&&!d[t]&&(d[t]=U)}}},Interpolate:{perspective:F,translate3d:D,rotate3d:D,skew:D,scale3d:D}};function j(t){t in this.valuesEnd&&!d[t]&&(d[t]=function(e,n,r,i){e.style[t]=(i>.99||i<.01?(10*F(n,r,i)>>0)/10:F(n,r,i)>>0)+"px"})}var H=["top","left","width","height"],K={};H.map((function(t){return K[t]=j}));var Q={component:"baseBoxModel",category:"boxModel",properties:H,Interpolate:{numbers:F},functions:{onStart:K}};var W={component:"baseOpacity",property:"opacity",Interpolate:{numbers:F},functions:{onStart:function(t){t in this.valuesEnd&&!d[t]&&(d[t]=function(e,n,r,i){e.style[t]=(1e3*F(n,r,i)>>0)/1e3})}}},R=new B(P),V=new B(Q),Y=new B(W),G={Animation:B,Components:{Transform:R,BoxModel:V,Opacity:Y},TweenBase:q,fromTo:function(t,e,n,r){return r=r||{},new A.tween(X(t),e,n,r)},Objects:I,Easing:w,Util:O,Render:S,Interpolate:m,Internals:N,Selector:X,Version:"2.0.10"};for(var J in o.fromTo=G.fromTo,G)f[J]=G[J];function Z(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new f(t)}))}return o.carousel=function(t,e,n,r,i){var a,l,f=[],d=c(t),p={},h={},m={},y={},v=e[n],g=v&&u(v),x=u(e[r]),T=d.translate,S=d.rotate,_=d.scale,b=t.getAttribute("data-transform-origin"),C=d.opacity,E=d.duration||500,I=d.delay||parseInt(E)/2,O=d.easing;return C&&(p.opacity=1,h.opacity=0,m.opacity=0,y.opacity=1),(_||T||S)&&(p.transform={},h.transform={},m.transform={},y.transform={}),_&&(p.transform.scale3d=[1,1,1],h.transform.scale3d=[_,_,_],m.transform.scale3d=[_,_,_],y.transform.scale3d=[1,1,1]),T&&(p.transform.translate3d=[0,0,0],h.transform.translate3d=[T.x?i?-T.x:T.x:0,T.y?i?-T.y:T.y:0,T.z?i?-T.z:T.z:0],m.transform.translate3d=[T.x?i?T.x:-T.x:0,T.y?i?T.y:-T.y:0,T.z?i?T.z:-T.z:0],y.transform.translate3d=[0,0,0]),S&&(p.transform.rotate3d=[0,0,0],h.transform.rotate3d=[S.x?i?-S.x:S.x:0,S.y?i?-S.y:S.y:0,S.z?i?-S.z:S.z:0],m.transform.rotate3d=[S.x?i?S.x:-S.x:0,S.y?i?S.y:-S.y:0,S.z?i?S.z:-S.z:0],y.transform.rotate3d=[0,0,0]),i||(g&&g.reverse(),x.reverse()),C||S||T||_||(E=50,I=0),a=l={easing:O,duration:E},g&&g.map((function(t,e){if(a.delay=250*e,f.push(o.fromTo(t,p,h,a)),b){var n=s(t,b),r="x"in n?/%/.test(n.x)?n.x:n.x+"px":"50%",i="y"in n?/%/.test(n.y)?n.y:n.y+"px":"50%",c="z"in n?n.z+"px":"";t.style.transformOrigin=r+" "+i+" "+c}})),x.map((function(t,e){if(l.delay=(I+50)*e,f.push(o.fromTo(t,m,y,l)),b){var n=s(t,b),r="x"in n?/%/.test(n.x)?n.x:n.x+"px":"50%",i="y"in n?/%/.test(n.y)?n.y:n.y+"px":"50%",a="z"in n?n.z+"px":"";t.style.transformOrigin=r+" "+i+" "+a}})),f},o.layer=function(t,e,n){var r,i=n||c(t),a=t.classList.contains("item-bg"),s={},u={},l=i.translate,f=i.rotate,d=i.scale,p=i.opacity,h=i.origin,m=i.duration,y=i.delay||(a?0:250),v=i.easing;if(v=/InOut/.test(v)||n?v:e?v.replace("In","Out"):v.replace("Out","In"),y=e?y:0,m=e||a?m:1.5*m,(p=!e&&a&&n?0:p)&&(s.opacity=e?0:1,u.opacity=e?1:0),(d||l||f)&&(s.transform={},u.transform={},h)){var g="x"in h?/%/.test(h.x)?h.x:h.x+"px":"50%",x="y"in h?/%/.test(h.y)?h.y:h.y+"px":"50%",T="z"in h?h.z+"px":"";t.style.transformOrigin=g+" "+x+" "+T}if(d&&(s.transform.scale3d=e?[d,d,d]:[1,1,1],u.transform.scale3d=e?[1,1,1]:[d,d,d]),l){var S=e&&l.x?l.x:0,_=l.x&&!e?l.x:0,b=e&&l.y?l.y:0,C=l.y&&!e?l.y:0,E=e&&l.z?l.z:0,I=l.z&&!e?l.z:0;s.transform.translate3d=[S,b,E],u.transform.translate3d=[_,C,I]}if(f){var O=e&&f.x?f.x:0,A=!e&&f.x?f.x:0,w=e&&f.y?f.y:0,L=!e&&f.y?f.y:0,M=e&&f.z?f.z:0,z=!e&&f.z?f.z:0;s.transform.rotate3d=[O,w,M],u.transform.rotate3d=[A,L,z]}return p||f||l||d||(m=50,y=0),r={easing:v,duration:m,delay:y},o.fromTo(t,s,u,r)},o.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},f.initComponent=Z,document.body?Z():document.addEventListener("DOMContentLoaded",(function t(){Z(),document.removeEventListener("DOMContentLoaded",t)})),f}));
