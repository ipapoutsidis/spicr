// Spicr Standalone v1.0.3 | thednp Â© 2020 | MIT-License
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Spicr=e()}(this,(function(){"use strict";var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,n="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],i={};function r(t,e,n){var i=e.trim().split(/[,|;]/),r={};return i.map((function(e){var i=e.split(/[:|=]/),a=i[0],s=i[1],o=/y/i.test(a)||/v/i.test(s)?"offsetHeight":"offsetWidth";r[a]=n&&/%/.test(s)&&!/z/i.test(a)?s:/%/.test(s)?parseFloat(s)*t[o]/100:parseFloat(s)})),r}function a(t){var e=t.getAttribute("data-translate"),n=t.getAttribute("data-rotate"),i=t.getAttribute("data-scale"),a=t.getAttribute("data-transform-origin"),s=t.getAttribute("data-opacity"),o=t.getAttribute("data-duration"),c=t.getAttribute("data-delay"),u=t.getAttribute("data-easing");return{translate:e?r(t,e):"",rotate:n?r(t,n):"",origin:a?r(t,a,1):"",scale:i?parseFloat(i):"",opacity:"false"!==s?1:0,duration:isNaN(o)?500:parseInt(o),delay:isNaN(c)?0:parseInt(c),easing:u||"easingCubicOut"}}function s(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function o(t,e,n){var r=t[e]||t[0],o=s(r),c=r.classList.contains("active"),u=t[n],l=u&&u.getElementsByClassName("item-bg")[0],f=l?a(l):0;for(var d in f)if(/translate|rotate/.test(d))for(var p in f[d])f[d][p]=-f[d][p];return f?o.map((function(t){return i.layer(t,0,f)})):o.map((function(t){return i.layer(t,c?0:1)}))}function c(r,a){r=function(t,e){var n=e&&e instanceof Element?e:document;return t instanceof Element?t:n.querySelector(t)}(r),a=a||{};var s=this,c=s.tweens=[],u=e&&t?["touchstart","touchend"]:n,l=r.getAttribute("data-interval"),f=r.getAttribute("data-pause"),d=!1!==a.pause&&"false"!==f&&"hover",p=!1===a.interval||0===parseInt(l)||"false"===l?0:"number"==typeof a.interval?a.interval:isNaN(l)?5e3:parseInt(l),m=r.getElementsByClassName("item"),h=r.querySelectorAll("[data-slide]"),y=h.length&&h[0],v=h.length&&h[1],g=r.getElementsByClassName("spicr-pages")[0],x=g&&g.querySelectorAll("[data-slide-to]"),S=null,_=null,C=0,b=0,I=r.classList.contains("spicr-slider"),T=r.classList.contains("spicr-carousel");function A(){r.classList.contains("paused")||(r.classList.add("paused"),!b&&(clearInterval(S),S=null))}function w(){r.classList.contains("paused")&&(r.classList.remove("paused"),!b&&(clearInterval(S),S=null),!b&&s.cycle())}function E(t){if(t.preventDefault(),!b){var e=t.target,n=e&&e.getAttribute("data-slide-to");return e&&!e.classList.contains("active")&&n&&(C=parseInt(n),s.slideTo(C)),!1}}function O(t){if(t.preventDefault(),!b){this===v||v.contains(this)?C++:(this===y||y.contains(this))&&C--,s.slideTo(C)}}function z(t){t=t?"addEventListener":"removeEventListener","hover"===d&&p&&(r[t](u[0],A),r[t](u[1],w)),v&&v[t]("click",O),y&&y[t]("click",O),g&&g[t]("click",E)}function M(t){Array.from(x).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function L(t,e){C=e,m[e].classList.add("next"),b=!0,T&&t>-1&&m[t].offsetHeight!==m[e].offsetHeight&&(r.style.height=getComputedStyle(m[t]).height)}function k(t,e){m[e].classList.add("active"),m[e].classList.remove("next"),m[t]&&m[t].classList.remove("active"),setTimeout((function(){T&&(r.style.height=""),i.reset(r),b=!1,c=[],p&&!r.classList.contains("paused")&&s.cycle()}),0)}this.getActiveIndex=function(){var t=r.getElementsByClassName("item active")[0];return Array.from(m).indexOf(t)},this.cycle=function(){clearInterval(S),S=setTimeout((function(){C++,s.slideTo(C)}),p)},this.slideTo=function(t){var e=this.getActiveIndex();e===t||b||(clearInterval(S),S=setTimeout((function(){if(e<t||0===e&&t===m.length-1?_=1:(e>t||e===m.length-1&&0===t)&&(_=0),t<0?t=m.length-1:t>=m.length&&(t=0),I){L(e,t);var n=-1!==e?o(m,e,t):o(m,e),a=-1!==e&&o(m,t);-1===e?n.length&&(c=c.concat(n)):(n.length&&(c=c.concat(n)),a.length&&(c=c.concat(a))),c.length?(c.reduce((function(t,e){return t._duration+t._delay>e._duration+e._delay?t:e}))._onComplete=function(){return k(e,t)},c.map((function(t){return t.start()}))):k(e,t),x&&M(x[t])}else if(T){if(L(e,t),(c=i.carousel(r,m,e,t,_)).length){if(c[c.length-1]._onComplete=function(){return k(e,t)},m[e]&&m[e].offsetHeight!==m[t].offsetHeight){var s=r.getAttribute("data-easing"),u=r.getAttribute("data-duration");c.push(i.fromTo(r,{height:parseFloat(getComputedStyle(m[e]).height)},{height:parseFloat(getComputedStyle(m[t]).height)},{easing:s||"easingCubicOut",duration:isNaN(u)?500:parseInt(u),delay:250}))}c.map((function(t){return t.start()}))}else k(e,t);x&&M(x[t])}}),1))},this.dispose=function(){b&&c.map((function(t){return t.stop()})),i.reset(r),z(),clearInterval(S),delete r.Spicr},r.Spicr&&r.Spicr.dispose(),z(1),r.Spicr=s,r.getElementsByClassName("item active").length?p&&s.cycle():s.slideTo(0)}var u={},l=[],f="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},d={},p={},m={};m.now=self.performance.now.bind(self.performance);var h=0,y=function(t){for(var e=0;e<l.length;)l[e].update(t)?e++:l.splice(e,1);h=requestAnimationFrame(y)};function v(){setTimeout((function(){if(!l.length&&h){for(var t in cancelAnimationFrame(h),h=null,p)if("function"==typeof p[t])u[t]&&delete u[t];else for(var e in p[t])u[e]&&delete u[e];for(var n in d)u[n]&&delete u[n]}}),64)}var g={Tick:h,Ticker:y,Tweens:l,Time:m};for(var x in g)u[x]||(u[x]="Time"===x?m.now:g[x]);f._KUTE=u;var S={duration:700,delay:0,easing:"linear"},_={},C={},b={defaultOptions:S,linkProperty:_,onStart:p,onComplete:C},I={},T={},A={linear:function(t){return t},easingQuadraticIn:function(t){return t*t},easingQuadraticOut:function(t){return t*(2-t)},easingQuadraticInOut:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easingCubicIn:function(t){return t*t*t},easingCubicOut:function(t){return--t*t*t+1},easingCubicInOut:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easingCircularIn:function(t){return-(Math.sqrt(1-t*t)-1)},easingCircularOut:function(t){return Math.sqrt(1-(t-=1)*t)},easingCircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easingBackIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easingBackOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},easingBackInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}};function w(t){return l.push(t)}function E(t){var e=l.indexOf(t);-1!==e&&l.splice(e,1)}T.processEasing=function(t){return"function"==typeof t?t:"function"==typeof A[t]?A[t]:A.linear};var O={};function z(){var t=this,e=function(e){var n=_[e],i=O[e];for(var r in n)if("function"==typeof n[r]&&Object.keys(t.valuesEnd).some((function(e){return i&&i.includes(e)||"attr"===e&&Object.keys(t.valuesEnd[e]).some((function(t){return i&&i.includes(t)}))})))!u[r]&&(u[r]=n[r]);else for(var a in t.valuesEnd)for(var s in t.valuesEnd[a])if("function"==typeof n[s])!u[s]&&(u[s]=n[s]);else for(var o in n[r])n[s]&&"function"==typeof n[s][o]&&!u[o]&&(u[o]=n[s][o])};for(var n in _)e(n)}var M={add:w,remove:E,getAll:function(){return l},removeAll:function(){l.length=0},stop:v,linkInterpolation:z};function L(t,e){try{return e?t instanceof HTMLCollection||t instanceof NodeList||t instanceof Array&&t.every((function(t){return t instanceof Element}))?t:document.querySelectorAll(t):t instanceof Element||t===window?t:document.querySelector(t)}catch(e){console.error("KUTE.js - Element(s) not found: "+t+".")}}var k=function(t){return this.setComponent(t)};k.prototype.setComponent=function(t){var e=t.component,n={onStart:p,onComplete:C},i=t.category,r=t.property;if(O[e]=t.properties||t.subProperties||t.property,t.defaultOptions)for(var a in t.defaultOptions)S[a]=t.defaultOptions[a];if(t.functions)for(var s in n)if(s in t.functions)if("function"==typeof t.functions[s])!n[s][e]&&(n[s][e]={}),!n[s][e][i||r]&&(n[s][e][i||r]=t.functions[s]);else for(var o in t.functions[s])!n[s][e]&&(n[s][e]={}),!n[s][e][o]&&(n[s][e][o]=t.functions[s][o]);if(t.Interpolate){for(var c in t.Interpolate){var u=t.Interpolate[c];if("function"!=typeof u||d[c])for(var l in u)"function"!=typeof u[l]||d[c]||(d[c]=u[l]);else d[c]=u}_[e]=t.Interpolate}if(t.Util)for(var f in t.Util)!I[f]&&(I[f]=t.Util[f]);return{name:e}};var N=function(t,e,n,i){for(var r in this.element=t,this.playing=!1,this._startTime=null,this._startFired=!1,this.valuesEnd=n,this.valuesStart=e,i=i||{},this._resetStart=i.resetStart||0,this._easing="function"==typeof i.easing?i.easing:T.processEasing(i.easing),this._duration=i.duration||S.duration,this._delay=i.delay||S.delay,i){var a="_"+r;a in this||(this[a]=i[r])}var s=this._easing.name;return p[s]||(p[s]=function(t){!u[t]&&t===this._easing.name&&(u[t]=this._easing)}),this};function B(t,e,n){return(t=+t)+(e-=t)*n}function q(t,e,n){for(var i=[],r=0,a=e.length;r<a;r++)i[r]=(1e3*(t[r]+(e[r]-t[r])*n)>>0)/1e3;return i}N.prototype.start=function(t){if(w(this),this.playing=!0,this._startTime=void 0!==t?t:u.Time(),this._startTime+=this._delay,!this._startFired){for(var e in this._onStart&&this._onStart.call(this),p)if("function"==typeof p[e])p[e].call(this,e);else for(var n in p[e])p[e][n].call(this,n);z.call(this),this._startFired=!0}return!h&&y(),this},N.prototype.stop=function(){return this.playing&&(E(this),this.playing=!1,this._onStop&&this._onStop.call(this),this.close()),this},N.prototype.close=function(){for(var t in C)for(var e in C[t])C[t][e].call(this,e);this._startFired=!1,v.call(this)},N.prototype.chain=function(t){return this._chain=[],this._chain=t.length?t:this._chain.concat(t),this},N.prototype.stopChainedTweens=function(){this._chain&&this._chain.length&&this._chain.map((function(t){return t.stop()}))},N.prototype.update=function(t){var e,n;if((t=void 0!==t?t:u.Time())<this._startTime&&this.playing)return!0;for(var i in e=(t-this._startTime)/this._duration,e=0===this._duration||e>1?1:e,n=this._easing(e),this.valuesEnd)u[i](this.element,this.valuesStart[i],this.valuesEnd[i],n);return this._onUpdate&&this._onUpdate.call(this),1!==e||(this._onComplete&&this._onComplete.call(this),this.playing=!1,this.close(),void 0!==this._chain&&this._chain.length&&this._chain.map((function(t){return t.start()})),!1)},T.tween=N;var F="undefined"!=typeof DOMMatrix?DOMMatrix:"undefined"!=typeof WebKitCSSMatrix?WebKitCSSMatrix:"undefined"!=typeof CSSMatrix?CSSMatrix:"undefined"!=typeof MSCSSMatrix?MSCSSMatrix:null,U={component:"transformMatrixBase",property:"transform",functions:{onStart:{transform:function(t){this.valuesEnd[t]&&!u[t]&&(u[t]=function(e,n,i,r){var a=new F,s={};for(var o in i)s[o]="perspective"===o?B(n[o],i[o],r):q(n[o],i[o],r);s.perspective&&(a.m34=-1/s.perspective),a=s.translate3d?a.translate(s.translate3d[0],s.translate3d[1],s.translate3d[2]):a,a=s.rotate3d?a.rotate(s.rotate3d[0],s.rotate3d[1],s.rotate3d[2]):a,s.skew&&(a=s.skew[0]?a.skewX(s.skew[0]):a,a=s.skew[1]?a.skewY(s.skew[1]):a),a=s.scale3d?a.scale(s.scale3d[0],s.scale3d[1],s.scale3d[2]):a,e.style[t]=a.toString()})},CSS3Matrix:function(t){this.valuesEnd.transform&&!u[t]&&(u[t]=F)}}},Interpolate:{perspective:B,translate3d:q,rotate3d:q,skew:q,scale3d:q}};function D(t){t in this.valuesEnd&&!u[t]&&(u[t]=function(e,n,i,r){e.style[t]=(r>.99||r<.01?(10*B(n,i,r)>>0)/10:B(n,i,r)>>0)+"px"})}var H=["top","left","width","height"],P={};H.map((function(t){return P[t]=D}));var j={component:"baseBoxModel",category:"boxModel",properties:H,Interpolate:{numbers:B},functions:{onStart:P}};var K={component:"baseOpacity",property:"opacity",Interpolate:{numbers:B},functions:{onStart:function(t){t in this.valuesEnd&&!u[t]&&(u[t]=function(e,n,i,r){e.style[t]=(1e3*B(n,i,r)>>0)/1e3})}}},Q=new k(U),W=new k(j),R=new k(K),V={Animation:k,Components:{Transform:Q,BoxModel:W,Opacity:R},TweenBase:N,fromTo:function(t,e,n,i){return i=i||{},new T.tween(L(t),e,n,i)},Objects:b,Easing:A,Util:I,Render:g,Interpolate:d,Internals:M,Selector:L,Version:"2.0.10"};for(var X in i.fromTo=V.fromTo,V)c[X]=V[X];function Y(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new c(t)}))}return i.carousel=function(t,e,n,o,c){var u,l,f=[],d=a(t),p={},m={},h={},y={},v=e[n],g=v&&s(v),x=s(e[o]),S=d.translate,_=d.rotate,C=d.scale,b=t.getAttribute("data-transform-origin"),I=d.opacity,T=d.duration||500,A=d.delay||parseInt(T)/2,w=d.easing;return I&&(p.opacity=1,m.opacity=0,h.opacity=0,y.opacity=1),(C||S||_)&&(p.transform={},m.transform={},h.transform={},y.transform={}),C&&(p.transform.scale3d=[1,1,1],m.transform.scale3d=[C,C,C],h.transform.scale3d=[C,C,C],y.transform.scale3d=[1,1,1]),S&&(p.transform.translate3d=[0,0,0],m.transform.translate3d=[S.x?c?-S.x:S.x:0,S.y?c?-S.y:S.y:0,S.z?c?-S.z:S.z:0],h.transform.translate3d=[S.x?c?S.x:-S.x:0,S.y?c?S.y:-S.y:0,S.z?c?S.z:-S.z:0],y.transform.translate3d=[0,0,0]),_&&(p.transform.rotate3d=[0,0,0],m.transform.rotate3d=[_.x?c?-_.x:_.x:0,_.y?c?-_.y:_.y:0,_.z?c?-_.z:_.z:0],h.transform.rotate3d=[_.x?c?_.x:-_.x:0,_.y?c?_.y:-_.y:0,_.z?c?_.z:-_.z:0],y.transform.rotate3d=[0,0,0]),c||(g&&g.reverse(),x.reverse()),I||_||S||C||(T=50,A=0),u=l={easing:w,duration:T},g&&g.map((function(t,e){if(u.delay=250*e,f.push(i.fromTo(t,p,m,u)),b){var n=r(t,b),a="x"in n?/%/.test(n.x)?n.x:n.x+"px":"50%",s="y"in n?/%/.test(n.y)?n.y:n.y+"px":"50%",o="z"in n?n.z+"px":"";t.style.transformOrigin=a+" "+s+" "+o}})),x.map((function(t,e){if(l.delay=(A+50)*e,f.push(i.fromTo(t,h,y,l)),b){var n=r(t,b),a="x"in n?/%/.test(n.x)?n.x:n.x+"px":"50%",s="y"in n?/%/.test(n.y)?n.y:n.y+"px":"50%",o="z"in n?n.z+"px":"";t.style.transformOrigin=a+" "+s+" "+o}})),f},i.layer=function(t,e,n){var r,s=n||a(t),o=t.classList.contains("item-bg"),c={},u={},l=s.translate,f=s.rotate,d=s.scale,p=s.opacity,m=s.origin,h=s.duration,y=s.delay||(o?0:250),v=s.easing;if(v=/InOut/.test(v)||n?v:e?v.replace("In","Out"):v.replace("Out","In"),y=e?y:0,h=e||o?h:1.5*h,(p=!e&&o&&n?0:p)&&(c.opacity=e?0:1,u.opacity=e?1:0),(d||l||f)&&(c.transform={},u.transform={},m)){var g="x"in m?/%/.test(m.x)?m.x:m.x+"px":"50%",x="y"in m?/%/.test(m.y)?m.y:m.y+"px":"50%",S="z"in m?m.z+"px":"";t.style.transformOrigin=g+" "+x+" "+S}if(d&&(c.transform.scale3d=e?[d,d,d]:[1,1,1],u.transform.scale3d=e?[1,1,1]:[d,d,d]),l){var _=e&&l.x?l.x:0,C=l.x&&!e?l.x:0,b=e&&l.y?l.y:0,I=l.y&&!e?l.y:0,T=e&&l.z?l.z:0,A=l.z&&!e?l.z:0;c.transform.translate3d=[_,b,T],u.transform.translate3d=[C,I,A]}if(f){var w=e&&f.x?f.x:0,E=!e&&f.x?f.x:0,O=e&&f.y?f.y:0,z=!e&&f.y?f.y:0,M=e&&f.z?f.z:0,L=!e&&f.z?f.z:0;c.transform.rotate3d=[w,O,M],u.transform.rotate3d=[E,z,L]}return p||f||l||d||(h=50,y=0),r={easing:v,duration:h,delay:y},i.fromTo(t,c,u,r)},i.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},c.initComponent=Y,document.body?Y():document.addEventListener("DOMContentLoaded",(function t(){Y(),document.removeEventListener("DOMContentLoaded",t)})),c}));
