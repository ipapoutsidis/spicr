// Spicr v1.0.3 | thednp Â© 2020 | MIT-License
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Spicr=e()}(this,(function(){"use strict";var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,n="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],i={};function a(t,e,n){var i=e.trim().split(/[,|;]/),a={};return i.map((function(e){var i=e.split(/[:|=]/),r=i[0],o=i[1],s=/y/i.test(r)||/v/i.test(o)?"offsetHeight":"offsetWidth";a[r]=n&&/%/.test(o)&&!/z/i.test(r)?o:/%/.test(o)?parseFloat(o)*t[s]/100:parseFloat(o)})),a}function r(t){var e=t.getAttribute("data-translate"),n=t.getAttribute("data-rotate"),i=t.getAttribute("data-scale"),r=t.getAttribute("data-transform-origin"),o=t.getAttribute("data-opacity"),s=t.getAttribute("data-duration"),u=t.getAttribute("data-delay"),c=t.getAttribute("data-easing");return{translate:e?a(t,e):"",rotate:n?a(t,n):"",origin:r?a(t,r,1):"",scale:i?parseFloat(i):"",opacity:"false"!==o?1:0,duration:isNaN(s)?500:parseInt(s),delay:isNaN(u)?0:parseInt(u),easing:c||"easingCubicOut"}}function o(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function s(t,e,n){var a=t[e]||t[0],s=o(a),u=a.classList.contains("active"),c=t[n],l=c&&c.getElementsByClassName("item-bg")[0],f=l?r(l):0;for(var p in f)if(/translate|rotate/.test(p))for(var d in f[p])f[p][d]=-f[p][d];return f?s.map((function(t){return i.layer(t,0,f)})):s.map((function(t){return i.layer(t,u?0:1)}))}function u(a,r){a=function(t,e){var n=e&&e instanceof Element?e:document;return t instanceof Element?t:n.querySelector(t)}(a),r=r||{};var o=this,u=o.tweens=[],c=e&&t?["touchstart","touchend"]:n,l=a.getAttribute("data-interval"),f=a.getAttribute("data-pause"),p=!1!==r.pause&&"false"!==f&&"hover",d=!1===r.interval||0===parseInt(l)||"false"===l?0:"number"==typeof r.interval?r.interval:isNaN(l)?5e3:parseInt(l),h=a.getElementsByClassName("item"),m=a.querySelectorAll("[data-slide]"),y=m.length&&m[0],g=m.length&&m[1],v=a.getElementsByClassName("spicr-pages")[0],x=v&&v.querySelectorAll("[data-slide-to]"),I=null,_=null,O=0,M=0,b=a.classList.contains("spicr-slider"),E=a.classList.contains("spicr-carousel");function w(){a.classList.contains("paused")||(a.classList.add("paused"),!M&&(clearInterval(I),I=null))}function T(){a.classList.contains("paused")&&(a.classList.remove("paused"),!M&&(clearInterval(I),I=null),!M&&o.cycle())}function A(t){if(t.preventDefault(),!M){var e=t.target,n=e&&e.getAttribute("data-slide-to");return e&&!e.classList.contains("active")&&n&&(O=parseInt(n),o.slideTo(O)),!1}}function C(t){if(t.preventDefault(),!M){this===g||g.contains(this)?O++:(this===y||y.contains(this))&&O--,o.slideTo(O)}}function S(t){t=t?"addEventListener":"removeEventListener","hover"===p&&d&&(a[t](c[0],w),a[t](c[1],T)),g&&g[t]("click",C),y&&y[t]("click",C),v&&v[t]("click",A)}function z(t){Array.from(x).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function L(t,e){O=e,h[e].classList.add("next"),M=!0,E&&t>-1&&h[t].offsetHeight!==h[e].offsetHeight&&(a.style.height=getComputedStyle(h[t]).height)}function B(t,e){h[e].classList.add("active"),h[e].classList.remove("next"),h[t]&&h[t].classList.remove("active"),setTimeout((function(){E&&(a.style.height=""),i.reset(a),M=!1,u=[],d&&!a.classList.contains("paused")&&o.cycle()}),0)}this.getActiveIndex=function(){var t=a.getElementsByClassName("item active")[0];return Array.from(h).indexOf(t)},this.cycle=function(){clearInterval(I),I=setTimeout((function(){O++,o.slideTo(O)}),d)},this.slideTo=function(t){var e=this.getActiveIndex();e===t||M||(clearInterval(I),I=setTimeout((function(){if(e<t||0===e&&t===h.length-1?_=1:(e>t||e===h.length-1&&0===t)&&(_=0),t<0?t=h.length-1:t>=h.length&&(t=0),b){L(e,t);var n=-1!==e?s(h,e,t):s(h,e),r=-1!==e&&s(h,t);-1===e?n.length&&(u=u.concat(n)):(n.length&&(u=u.concat(n)),r.length&&(u=u.concat(r))),u.length?(u.reduce((function(t,e){return t._duration+t._delay>e._duration+e._delay?t:e}))._onComplete=function(){return B(e,t)},u.map((function(t){return t.start()}))):B(e,t),x&&z(x[t])}else if(E){if(L(e,t),(u=i.carousel(a,h,e,t,_)).length){if(u[u.length-1]._onComplete=function(){return B(e,t)},h[e]&&h[e].offsetHeight!==h[t].offsetHeight){var o=a.getAttribute("data-easing"),c=a.getAttribute("data-duration");u.push(i.fromTo(a,{height:parseFloat(getComputedStyle(h[e]).height)},{height:parseFloat(getComputedStyle(h[t]).height)},{easing:o||"easingCubicOut",duration:isNaN(c)?500:parseInt(c),delay:250}))}u.map((function(t){return t.start()}))}else B(e,t);x&&z(x[t])}}),1))},this.dispose=function(){M&&u.map((function(t){return t.stop()})),i.reset(a),S(),clearInterval(I),delete a.Spicr},a.Spicr&&a.Spicr.dispose(),S(1),a.Spicr=o,a.getElementsByClassName("item active").length?d&&o.cycle():o.slideTo(0)}var c={},l=[],f="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},p={},d={},h={};h.now=self.performance.now.bind(self.performance);var m=0,y=function(t){for(var e=0;e<l.length;)l[e].update(t)?e++:l.splice(e,1);m=requestAnimationFrame(y)};function g(){setTimeout((function(){if(!l.length&&m){for(var t in cancelAnimationFrame(m),m=null,d)if("function"==typeof d[t])c[t]&&delete c[t];else for(var e in d[t])c[e]&&delete c[e];for(var n in p)c[n]&&delete c[n]}}),64)}var v={Tick:m,Ticker:y,Tweens:l,Time:h};for(var x in v)c[x]||(c[x]="Time"===x?h.now:v[x]);f._KUTE=c;var I={duration:700,delay:0,easing:"linear"},_={},O={},M={defaultOptions:I,linkProperty:_,onStart:d,onComplete:O},b={},E={},w={linear:function(t){return t},easingSinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},easingSinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},easingSinusoidalInOut:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easingQuadraticIn:function(t){return t*t},easingQuadraticOut:function(t){return t*(2-t)},easingQuadraticInOut:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easingCubicIn:function(t){return t*t*t},easingCubicOut:function(t){return--t*t*t+1},easingCubicInOut:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easingQuarticIn:function(t){return t*t*t*t},easingQuarticOut:function(t){return 1- --t*t*t*t},easingQuarticInOut:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easingQuinticIn:function(t){return t*t*t*t*t},easingQuinticOut:function(t){return 1+--t*t*t*t*t},easingQuinticInOut:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easingCircularIn:function(t){return-(Math.sqrt(1-t*t)-1)},easingCircularOut:function(t){return Math.sqrt(1-(t-=1)*t)},easingCircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easingExponentialIn:function(t){return Math.pow(2,10*(t-1))-.001},easingExponentialOut:function(t){return 1-Math.pow(2,-10*t)},easingExponentialInOut:function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))},easingBackIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easingBackOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},easingBackInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},easingElasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/Math.PI*2,-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*Math.PI*2/.4))},easingElasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/Math.PI*2,n*Math.pow(2,-10*t)*Math.sin((t-e)*Math.PI*2/.4)+1)},easingElasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/Math.PI*2,(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*Math.PI*2/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*Math.PI*2/.4)*.5+1)},easingBounceIn:function(t){return 1-w.easingBounceOut(1-t)},easingBounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easingBounceInOut:function(t){return t<.5?.5*w.easingBounceIn(2*t):.5*w.easingBounceOut(2*t-1)+.5}};function T(t){return l.push(t)}function A(t){var e=l.indexOf(t);-1!==e&&l.splice(e,1)}E.processEasing=function(t){return"function"==typeof t?t:"function"==typeof w[t]?w[t]:w.linear};var C={};function S(){var t=this,e=function(e){var n=_[e],i=C[e];for(var a in n)if("function"==typeof n[a]&&Object.keys(t.valuesEnd).some((function(e){return i&&i.includes(e)||"attr"===e&&Object.keys(t.valuesEnd[e]).some((function(t){return i&&i.includes(t)}))})))!c[a]&&(c[a]=n[a]);else for(var r in t.valuesEnd)for(var o in t.valuesEnd[r])if("function"==typeof n[o])!c[o]&&(c[o]=n[o]);else for(var s in n[a])n[o]&&"function"==typeof n[o][s]&&!c[s]&&(c[s]=n[o][s])};for(var n in _)e(n)}var z={add:T,remove:A,getAll:function(){return l},removeAll:function(){l.length=0},stop:g,linkInterpolation:S};function L(t,e){try{return e?t instanceof HTMLCollection||t instanceof NodeList||t instanceof Array&&t.every((function(t){return t instanceof Element}))?t:document.querySelectorAll(t):t instanceof Element||t===window?t:document.querySelector(t)}catch(e){console.error("KUTE.js - Element(s) not found: "+t+".")}}var B=function(t){return this.setComponent(t)};B.prototype.setComponent=function(t){var e=t.component,n={onStart:d,onComplete:O},i=t.category,a=t.property;if(C[e]=t.properties||t.subProperties||t.property,t.defaultOptions)for(var r in t.defaultOptions)I[r]=t.defaultOptions[r];if(t.functions)for(var o in n)if(o in t.functions)if("function"==typeof t.functions[o])!n[o][e]&&(n[o][e]={}),!n[o][e][i||a]&&(n[o][e][i||a]=t.functions[o]);else for(var s in t.functions[o])!n[o][e]&&(n[o][e]={}),!n[o][e][s]&&(n[o][e][s]=t.functions[o][s]);if(t.Interpolate){for(var u in t.Interpolate){var c=t.Interpolate[u];if("function"!=typeof c||p[u])for(var l in c)"function"!=typeof c[l]||p[u]||(p[u]=c[l]);else p[u]=c}_[e]=t.Interpolate}if(t.Util)for(var f in t.Util)!b[f]&&(b[f]=t.Util[f]);return{name:e}};var k=function(t,e,n,i){for(var a in this.element=t,this.playing=!1,this._startTime=null,this._startFired=!1,this.valuesEnd=n,this.valuesStart=e,i=i||{},this._resetStart=i.resetStart||0,this._easing="function"==typeof i.easing?i.easing:E.processEasing(i.easing),this._duration=i.duration||I.duration,this._delay=i.delay||I.delay,i){var r="_"+a;r in this||(this[r]=i[a])}var o=this._easing.name;return d[o]||(d[o]=function(t){!c[t]&&t===this._easing.name&&(c[t]=this._easing)}),this};function N(t,e,n,i){return i=i||{},new E.tween(L(t),e,n,i)}function P(t,e,n,i){return"perspective("+(1e3*(t+(e-t)*i)>>0)/1e3+n+")"}function q(t,e,n,i){for(var a=[],r=0;r<3;r++)a[r]=(t[r]||e[r]?(1e3*(t[r]+(e[r]-t[r])*i)>>0)/1e3:0)+n;return"translate3d("+a.join(",")+")"}function F(t,e,n,i){var a="";return a+=t[0]||e[0]?"rotateX("+(1e3*(t[0]+(e[0]-t[0])*i)>>0)/1e3+n+")":"",a+=t[1]||e[1]?"rotateY("+(1e3*(t[1]+(e[1]-t[1])*i)>>0)/1e3+n+")":"",a+=t[2]||e[2]?"rotateZ("+(1e3*(t[2]+(e[2]-t[2])*i)>>0)/1e3+n+")":""}function Q(t,e,n){return"scale("+(1e3*(t+(e-t)*n)>>0)/1e3+")"}function j(t,e,n,i){var a=[];return a[0]=(t[0]===e[0]?e[0]:(1e3*(t[0]+(e[0]-t[0])*i)>>0)/1e3)+n,a[1]=t[1]||e[1]?(t[1]===e[1]?e[1]:(1e3*(t[1]+(e[1]-t[1])*i)>>0)/1e3)+n:"0","skew("+a.join(",")+")"}k.prototype.start=function(t){if(T(this),this.playing=!0,this._startTime=void 0!==t?t:c.Time(),this._startTime+=this._delay,!this._startFired){for(var e in this._onStart&&this._onStart.call(this),d)if("function"==typeof d[e])d[e].call(this,e);else for(var n in d[e])d[e][n].call(this,n);S.call(this),this._startFired=!0}return!m&&y(),this},k.prototype.stop=function(){return this.playing&&(A(this),this.playing=!1,this._onStop&&this._onStop.call(this),this.close()),this},k.prototype.close=function(){for(var t in O)for(var e in O[t])O[t][e].call(this,e);this._startFired=!1,g.call(this)},k.prototype.chain=function(t){return this._chain=[],this._chain=t.length?t:this._chain.concat(t),this},k.prototype.stopChainedTweens=function(){this._chain&&this._chain.length&&this._chain.map((function(t){return t.stop()}))},k.prototype.update=function(t){var e,n;if((t=void 0!==t?t:c.Time())<this._startTime&&this.playing)return!0;for(var i in e=(t-this._startTime)/this._duration,e=0===this._duration||e>1?1:e,n=this._easing(e),this.valuesEnd)c[i](this.element,this.valuesStart[i],this.valuesEnd[i],n);return this._onUpdate&&this._onUpdate.call(this),1!==e||(this._onComplete&&this._onComplete.call(this),this.playing=!1,this.close(),void 0!==this._chain&&this._chain.length&&this._chain.map((function(t){return t.start()})),!1)},E.tween=k;var U={component:"baseTransform",property:"transform",functions:{onStart:function(t){!c[t]&&this.valuesEnd[t]&&(c[t]=function(e,n,i,a){e.style[t]=(n.perspective||i.perspective?P(n.perspective,i.perspective,"px",a):"")+(n.translate3d?q(n.translate3d,i.translate3d,"px",a):"")+(n.rotate3d?F(n.rotate3d,i.rotate3d,"deg",a):"")+(n.skew?j(n.skew,i.skew,"deg",a):"")+(n.scale||i.scale?Q(n.scale,i.scale,a):"")})}},Interpolate:{perspective:P,translate3d:q,rotate3d:F,translate:function(t,e,n,i){var a=[];return a[0]=(t[0]===e[0]?e[0]:(1e3*(t[0]+(e[0]-t[0])*i)>>0)/1e3)+n,a[1]=t[1]||e[1]?(t[1]===e[1]?e[1]:(1e3*(t[1]+(e[1]-t[1])*i)>>0)/1e3)+n:"0","translate("+a.join(",")+")"},rotate:function(t,e,n,i){return"rotate("+(1e3*(t+(e-t)*i)>>0)/1e3+n+")"},scale:Q,skew:j}};function H(t,e,n){return(t=+t)+(e-=t)*n}var D={component:"baseOpacity",property:"opacity",Interpolate:{numbers:H},functions:{onStart:function(t){t in this.valuesEnd&&!c[t]&&(c[t]=function(e,n,i,a){e.style[t]=(1e3*H(n,i,a)>>0)/1e3})}}};function K(t){t in this.valuesEnd&&!c[t]&&(c[t]=function(e,n,i,a){e.style[t]=(a>.99||a<.01?(10*H(n,i,a)>>0)/10:H(n,i,a)>>0)+"px"})}var R=["top","left","width","height"],W={};R.map((function(t){return W[t]=K}));var X={component:"baseBoxModel",category:"boxModel",properties:R,Interpolate:{numbers:H},functions:{onStart:W}};i.fromTo=N;var Y={Animation:B,Components:{Transform:new B(U),Opacity:new B(D),BoxModel:new B(X)},Tween:k,fromTo:N,Objects:M,Easing:w,Util:b,Render:v,Interpolate:p,Internals:z,Selector:L};for(var Z in Y)u[Z]=Y[Z];function G(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new u(t)}))}return i.carousel=function(t,e,n,s,u){var c,l,f=[],p=r(t),d={},h={},m={},y={},g=e[n],v=g&&o(g),x=o(e[s]),I=p.translate,_=p.rotate,O=p.scale,M=t.getAttribute("data-transform-origin"),b=p.opacity,E=p.duration||500,w=p.delay||parseInt(E)/2,T=p.easing;return b&&(d.opacity=1,h.opacity=0,m.opacity=0,y.opacity=1),(O||I||_)&&(d.transform={},h.transform={},m.transform={},y.transform={}),O&&(d.transform.scale=1,h.transform.scale=O,m.transform.scale=O,y.transform.scale=1),I&&(d.transform.translate3d=[0,0,0],h.transform.translate3d=[I.x?u?-I.x:I.x:0,I.y?u?-I.y:I.y:0,I.z?u?-I.z:I.z:0],m.transform.translate3d=[I.x?u?I.x:-I.x:0,I.y?u?I.y:-I.y:0,I.z?u?I.z:-I.z:0],y.transform.translate3d=[0,0,0]),_&&(d.transform.rotate3d=[0,0,0],h.transform.rotate3d=[_.x?u?-_.x:_.x:0,_.y?u?-_.y:_.y:0,_.z?u?-_.z:_.z:0],m.transform.rotate3d=[_.x?u?_.x:-_.x:0,_.y?u?_.y:-_.y:0,_.z?u?_.z:-_.z:0],y.transform.rotate3d=[0,0,0]),b||_||I||O||(E=50,w=0),c=l={easing:T,duration:E},u||(v&&v.reverse(),x.reverse()),v&&v.map((function(t,e){if(c.delay=250*e,f.push(i.fromTo(t,d,h,c)),M){var n=a(t,M),r="x"in n?/%/.test(n.x)?n.x:n.x+"px":"50%",o="y"in n?/%/.test(n.y)?n.y:n.y+"px":"50%",s="z"in n?n.z+"px":"";t.style.transformOrigin=r+" "+o+" "+s}})),x.map((function(t,e){if(l.delay=(w+50)*e,f.push(i.fromTo(t,m,y,l)),M){var n=a(t,M),r="x"in n?/%/.test(n.x)?n.x:n.x+"px":"50%",o="y"in n?/%/.test(n.y)?n.y:n.y+"px":"50%",s="z"in n?n.z+"px":"";t.style.transformOrigin=r+" "+o+" "+s}})),f},i.layer=function(t,e,n){var a,o=n||r(t),s=t.classList.contains("item-bg"),u={},c={},l=o.translate,f=o.rotate,p=o.scale,d=o.opacity,h=o.origin,m=o.duration,y=o.delay||(s?0:250),g=o.easing;if(g=/InOut/.test(g)||n?g:e?g.replace("In","Out"):g.replace("Out","In"),y=e?y:0,m=e||s?m:1.5*m,(d=!e&&s&&n?0:d)&&(u.opacity=e?0:1,c.opacity=e?1:0),(p||l||f)&&(u.transform={},c.transform={},h)){var v="x"in h?/%/.test(h.x)?h.x:h.x+"px":"50%",x="y"in h?/%/.test(h.y)?h.y:h.y+"px":"50%",I="z"in h?h.z+"px":"";t.style.transformOrigin=v+" "+x+" "+I}if(p&&(u.transform.scale=e?p:1,c.transform.scale=e?1:p),l){var _=e&&l.x?l.x:0,O=l.x&&!e?l.x:0,M=e&&l.y?l.y:0,b=l.y&&!e?l.y:0,E=e&&l.z?l.z:0,w=l.z&&!e?l.z:0;u.transform.translate3d=[_,M,E],c.transform.translate3d=[O,b,w]}if(f){var T=e&&f.x?f.x:0,A=!e&&f.x?f.x:0,C=e&&f.y?f.y:0,S=!e&&f.y?f.y:0,z=e&&f.z?f.z:0,L=!e&&f.z?f.z:0;u.transform.rotate3d=[T,C,z],c.transform.rotate3d=[A,S,L]}return d||f||l||p||(m=50,y=0),a={easing:g,duration:m,delay:y},i.fromTo(t,u,c,a)},i.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},u.initComponent=G,document.body?G():document.addEventListener("DOMContentLoaded",(function t(){G(),document.removeEventListener("DOMContentLoaded",t)})),u}));
