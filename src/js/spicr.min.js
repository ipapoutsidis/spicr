// Spicr v1.0.4 | thednp Â© 2020 | MIT-License
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Spicr=e()}(this,(function(){"use strict";var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.msMaxTouchPoints||!1,n="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],a=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t,e)}),e)}catch(t){}return t}()&&{passive:!0},r={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},s={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseout"},i={};function o(t,e,n){var a=e.trim().split(/[,|;]/),r={};return a.map((function(e){var a=e.split(/[:|=]/),s=a[0],i=a[1],o=/y/i.test(s)||/v/i.test(i)?"offsetHeight":"offsetWidth";r[s]=n&&/%/.test(i)&&!/z/i.test(s)?i:/%/.test(i)?parseFloat(i)*t[o]/100:parseFloat(i)})),r}function c(t){var e=t.getAttribute("data-translate"),n=t.getAttribute("data-rotate"),a=parseFloat(t.getAttribute("data-scale")),r=t.getAttribute("data-transform-origin"),s=t.getAttribute("data-opacity"),i=parseInt(t.getAttribute("data-duration")),c=parseInt(t.getAttribute("data-delay")),u=t.getAttribute("data-easing");return{translate:e?o(t,e):"",rotate:n?o(t,n):"",origin:r?o(t,r,1):"",scale:isNaN(a)?"":a,opacity:"false"!==s?1:0,duration:isNaN(i)?500:i,delay:isNaN(c)?0:c,easing:u||"easingCubicOut"}}function u(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function l(t,e,n){var a=t[e]||t[0],r=u(a),s=a.classList.contains("active"),o=t[n],l=o&&o.getElementsByClassName("item-bg")[0],d=l?c(l):0;for(var f in d)if(/translate|rotate/.test(f))for(var m in d[f])d[f][m]=-d[f][m];return d?r.map((function(t){return i.layer(t,0,d)})):r.map((function(t){return i.layer(t,s?0:1)}))}function d(o,c){var u,d,f;u=o,f=d&&d instanceof Element?d:document,o=u instanceof Element?u:f.querySelector(u),c=c||{};var m=this,p=m.tweens=[],y={},g=e&&t?["touchstart","touchend"]:n,h=e&&t?r:s,v=o.getAttribute("data-interval"),x=o.getAttribute("data-pause"),T=o.getAttribute("data-touch"),L=!1!==c.pause&&"false"!==x&&"hover",z=!1===c.touch||"false"===T?0:1,A=!1===c.interval||0===parseInt(v)||"false"===v?0:"number"==typeof c.interval?c.interval:isNaN(v)?5e3:parseInt(v),b=o.getElementsByClassName("item"),E=o.querySelectorAll("[data-slide]"),C=E.length&&E[0],I=E.length&&E[1],N=o.getElementsByClassName("spicr-pages")[0],X=N&&N.querySelectorAll("[data-slide-to]"),O=null,S=null,B=0,D=0,w=o.classList.contains("spicr-slider"),M=o.classList.contains("spicr-carousel");function _(){o.classList.contains("paused")||(o.classList.add("paused"),!D&&(clearInterval(O),O=null))}function q(){o.classList.contains("paused")&&(o.classList.remove("paused"),!D&&(clearInterval(O),O=null),!D&&m.cycle())}function F(t){if(t.preventDefault(),!D){var e=t.target,n=e&&e.getAttribute("data-slide-to");return e&&!e.classList.contains("active")&&n&&(B=parseInt(n),m.slideTo(B)),!1}}function H(t){if(t.preventDefault(),!D){this===I||I.contains(this)?B++:(this===C||C.contains(this))&&B--,m.slideTo(B)}}function P(t){t=t?"addEventListener":"removeEventListener","hover"===L&&A&&(o[t](g[0],_),o[t](g[1],q)),I&&I[t]("click",H),C&&C[t]("click",H),z&&b.length>1&&o[t](h.start,j,a),N&&N[t]("click",F)}function j(t){y.isTouch||(y.startX=t.changedTouches?t.changedTouches[0].pageX:t.pageX,o.contains(t.target)&&(y.isTouch=!0,k(1)))}function k(t){o[t=t?"addEventListener":"removeEventListener"](h.move,K,a),o[t](h.end,U,a)}function K(t){if(y.isTouch)return y.currentX=t.changedTouches?t.changedTouches[0].pageX:t.pageX,"touchmove"===t.type&&t.changedTouches.length>1?(t.preventDefault(),!1):void 0}function U(t){if(y.isTouch&&!D&&(y.endX=y.currentX?y.currentX:t.changedTouches?t.changedTouches[0].pageX:t.pageX,y.isTouch)){if((!o.contains(t.target)||!o.contains(t.relatedTarget))&&Math.abs(y.startX-y.endX)<75)return!1;y.currentX<y.startX?y.index++:y.currentX>y.startX&&y.index--,y.isTouch=!1,m.slideTo(y.index),k()}}function W(t){Array.from(X).map((function(t){return t.classList.remove("active")})),t&&t.classList.add("active")}function G(t,e){B=e,b[e].classList.add("next"),D=!0,M&&t>-1&&b[t].offsetHeight!==b[e].offsetHeight&&(o.style.height=getComputedStyle(b[t]).height)}function J(t,e){b[e].classList.add("active"),b[e].classList.remove("next"),b[t]&&b[t].classList.remove("active"),setTimeout((function(){M&&(o.style.height=""),i.reset(o),D=!1,p=[],A&&!o.classList.contains("paused")&&m.cycle()}),0)}this.getActiveIndex=function(){var t=o.getElementsByClassName("item active")[0];return Array.from(b).indexOf(t)},this.cycle=function(){clearInterval(O),O=setTimeout((function(){B++,m.slideTo(B)}),A)},this.slideTo=function(t){var e=this.getActiveIndex();e===t||D||(clearInterval(O),O=setTimeout((function(){if(e<t||0===e&&t===b.length-1?S=1:(e>t||e===b.length-1&&0===t)&&(S=0),t<0?t=b.length-1:t>=b.length&&(t=0),w){G(e,t);var n=-1!==e?l(b,e,t):l(b,e),a=-1!==e&&l(b,t);-1===e?n.length&&(p=p.concat(n)):(n.length&&(p=p.concat(n)),a.length&&(p=p.concat(a))),p.length?(p.reduce((function(t,e){return t._duration+t._delay>e._duration+e._delay?t:e}))._onComplete=function(){return J(e,t)},p.map((function(t){return t.start()}))):J(e,t),X&&W(X[t])}else if(M){if(G(e,t),(p=i.carousel(o,b,e,t,S)).length){if(p[p.length-1]._onComplete=function(){return J(e,t)},b[e]&&b[e].offsetHeight!==b[t].offsetHeight){var r=o.getAttribute("data-easing"),s=o.getAttribute("data-duration");p.push(i.fromTo(o,{height:parseFloat(getComputedStyle(b[e]).height)},{height:parseFloat(getComputedStyle(b[t]).height)},{easing:r||"easingCubicOut",duration:isNaN(s)?500:parseInt(s),delay:250}))}p.map((function(t){return t.start()}))}else J(e,t);X&&W(X[t])}}),1))},this.dispose=function(){D&&p.map((function(t){return t.stop()})),i.reset(o),y={},P(),clearInterval(O),delete o.Spicr},o.Spicr&&o.Spicr.dispose(),P(1),o.Spicr=m,o.getElementsByClassName("item active").length?A&&m.cycle():m.slideTo(0)}if("undefined"==typeof KUTE)throw Error("Spicr requires KUTE.js ^2.0.10");function f(t){t=t||document,Array.from(t.querySelectorAll('[data-function="spicr"]')).map((function(t){return new d(t)}))}return i.fromTo=KUTE.fromTo,i.carousel=function(t,e,n,a,r){var s,l,d=[],f=c(t),m={},p={},y={},g={},h=e[n],v=h&&u(h),x=u(e[a]),T=f.translate,L=f.rotate,z=f.scale,A=t.getAttribute("data-transform-origin"),b=f.opacity,E=f.duration||500,C=f.delay||parseInt(E)/2,I=f.easing;return b&&(m.opacity=1,p.opacity=0,y.opacity=0,g.opacity=1),(z||T||L)&&(m.transform={},p.transform={},y.transform={},g.transform={}),z&&(m.transform.scale=1,p.transform.scale=z,y.transform.scale=z,g.transform.scale=1),T&&(m.transform.translate3d=[0,0,0],p.transform.translate3d=[T.x?r?-T.x:T.x:0,T.y?r?-T.y:T.y:0,T.z?r?-T.z:T.z:0],y.transform.translate3d=[T.x?r?T.x:-T.x:0,T.y?r?T.y:-T.y:0,T.z?r?T.z:-T.z:0],g.transform.translate3d=[0,0,0]),L&&(m.transform.rotate3d=[0,0,0],p.transform.rotate3d=[L.x?r?-L.x:L.x:0,L.y?r?-L.y:L.y:0,L.z?r?-L.z:L.z:0],y.transform.rotate3d=[L.x?r?L.x:-L.x:0,L.y?r?L.y:-L.y:0,L.z?r?L.z:-L.z:0],g.transform.rotate3d=[0,0,0]),b||L||T||z||(E=50,C=0),s=l={easing:I,duration:E},r||(v&&v.reverse(),x.reverse()),v&&v.map((function(t,e){if(s.delay=250*e,d.push(i.fromTo(t,m,p,s)),A){var n=o(t,A),a="x"in n?/%/.test(n.x)?n.x:n.x+"px":"50%",r="y"in n?/%/.test(n.y)?n.y:n.y+"px":"50%",c="z"in n?n.z+"px":"";t.style.transformOrigin=a+" "+r+" "+c}})),x.map((function(t,e){if(l.delay=(C+50)*e,d.push(i.fromTo(t,y,g,l)),A){var n=o(t,A),a="x"in n?/%/.test(n.x)?n.x:n.x+"px":"50%",r="y"in n?/%/.test(n.y)?n.y:n.y+"px":"50%",s="z"in n?n.z+"px":"";t.style.transformOrigin=a+" "+r+" "+s}})),d},i.layer=function(t,e,n){var a,r=n||c(t),s=t.classList.contains("item-bg"),o={},u={},l=r.translate,d=r.rotate,f=r.scale,m=r.opacity,p=r.origin,y=r.duration,g=r.delay||(s?0:250),h=r.easing;if(h=/InOut/.test(h)||n?h:e?h.replace("In","Out"):h.replace("Out","In"),g=e?g:0,y=e||s?y:1.5*y,(m=!e&&s&&n?0:m)&&(o.opacity=e?0:1,u.opacity=e?1:0),(f||l||d)&&(o.transform={},u.transform={},p)){var v="x"in p?/%/.test(p.x)?p.x:p.x+"px":"50%",x="y"in p?/%/.test(p.y)?p.y:p.y+"px":"50%",T="z"in p?p.z+"px":"";t.style.transformOrigin=v+" "+x+" "+T}if(f&&(o.transform.scale=e?f:1,u.transform.scale=e?1:f),l){var L=e&&l.x?l.x:0,z=l.x&&!e?l.x:0,A=e&&l.y?l.y:0,b=l.y&&!e?l.y:0,E=e&&l.z?l.z:0,C=l.z&&!e?l.z:0;o.transform.translate3d=[L,A,E],u.transform.translate3d=[z,b,C]}if(d){var I=e&&d.x?d.x:0,N=!e&&d.x?d.x:0,X=e&&d.y?d.y:0,O=!e&&d.y?d.y:0,S=e&&d.z?d.z:0,B=!e&&d.z?d.z:0;o.transform.rotate3d=[I,X,S],u.transform.rotate3d=[N,O,B]}return m||d||l||f||(y=50,g=0),a={easing:h,duration:y,delay:g},i.fromTo(t,o,u,a)},i.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).map((function(t){t.style.opacity="",t.style.transform="",t.style.transformOrigin=""}))},d.initComponent=f,document.body?f():document.addEventListener("DOMContentLoaded",(function t(){f(),document.removeEventListener("DOMContentLoaded",t)})),d}));
